!function(t){function i(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}var e={};i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=8)}([function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o={GRAVITY_FORCE:353},a={config:{totalCount:5,sprite_0:{width:20,height:24.4,left:0,top:0},sprite_1:{width:20,height:24.4,left:23.2,top:0},sprite_2:{width:20,height:24.4,left:47.6,top:0},sprite_3:{width:20,height:24.4,left:71.6,top:0},sprite_4:{width:20,height:24.4,left:96,top:0}}},n={config:{totalCount:12,sprite_11:{width:21.6,height:26.8,left:0,top:0},sprite_10:{width:21.6,height:26.8,left:21.6,top:0},sprite_9:{width:21.6,height:26.8,left:43.2,top:0},sprite_8:{width:21.6,height:26.8,left:64.8,top:0},sprite_7:{width:21.6,height:26.8,left:86.4,top:0},sprite_6:{width:21.6,height:26.8,left:108,top:0},sprite_5:{width:21.6,height:26.8,left:129.6,top:0},sprite_4:{width:21.6,height:26.8,left:151.2,top:0},sprite_3:{width:21.6,height:26.8,left:172.8,top:0},sprite_2:{width:21.6,height:26.8,left:194.4,top:0},sprite_1:{width:21.6,height:26.8,left:86.4,top:0},sprite_0:{width:21.6,height:26.8,left:237.6,top:0}}},s={config:{totalCount:12,sprite_11:{width:18,height:17.2,left:53.6,top:0},sprite_10:{width:18,height:17.2,left:72,top:0},sprite_9:{width:18,height:17.2,left:90,top:0},sprite_8:{width:18,height:17.2,left:0,top:0},sprite_7:{width:18,height:17.2,left:18,top:0},sprite_6:{width:18,height:17.2,left:90,top:0},sprite_5:{width:18,height:17.2,left:162,top:0},sprite_4:{width:18,height:17.2,left:72,top:0},sprite_3:{width:18,height:17.2,left:198,top:0},sprite_2:{width:18,height:17.2,left:108,top:0},sprite_1:{width:18,height:17.2,left:126,top:0},sprite_0:{width:18,height:17.2,left:144,top:0}}},r={config:{totalCount:5,sprite_1:{height:23,width:62,left:0,top:0},sprite_4:{height:23.5,width:63.5,left:0,top:23},sprite_3:{height:24,width:64,left:0,top:46.5},sprite_5:{height:48,width:64.5,left:0,top:70.5},sprite_2:{height:23.5,width:64.5,left:0,top:94.5}}},l={config:{totalCount:35,sprite_34:{height:3,width:20,left:0,top:0},sprite_8:{height:19,width:22,left:0,top:3},sprite_35:{height:2.5,width:22.5,left:0,top:22},sprite_28:{height:15.5,width:22.5,left:0,top:24.5},sprite_29:{height:23.5,width:22.5,left:0,top:40},sprite_19:{height:28.5,width:22.5,left:0,top:53.5},sprite_0:{height:5.5,width:22.5,left:0,top:82},sprite_33:{height:5,width:23,left:0,top:87.5},sprite_27:{height:16,width:23,left:0,top:92.5},sprite_9:{height:21.5,width:23,left:0,top:108.5},sprite_20:{height:26.5,width:23,left:0,top:130},sprite_7:{height:16.5,width:23,left:0,top:156.5},sprite_30:{height:11,width:23.5,left:0,top:173},sprite_2:{height:9,width:24,left:0,top:184},sprite_1:{height:7.5,width:24,left:0,top:193},sprite_26:{height:16,width:24,left:0,top:200.5},sprite_10:{height:24.5,width:24,left:0,top:216.5},sprite_23:{height:19,width:24.5,left:0,top:241},sprite_21:{height:25.5,width:24.5,left:0,top:260},sprite_3:{height:9.5,width:25,left:0,top:285.5},sprite_22:{height:24,width:25.5,left:0,top:295},sprite_11:{height:23,width:25.5,left:0,top:319},sprite_31:{height:9.5,width:25.5,left:0,top:342},sprite_32:{height:7,width:26.5,left:0,top:351.5},sprite_18:{height:29,width:26.5,left:0,top:358.5},sprite_12:{height:23,width:27,left:0,top:387.5},sprite_25:{height:15.5,width:27,left:0,top:410.5},sprite_13:{height:23,width:27.5,left:0,top:426},sprite_17:{height:29,width:27.5,left:0,top:449},sprite_24:{height:17,width:27.5,left:0,top:478},sprite_6:{height:15,width:28,left:0,top:495},sprite_4:{height:10,width:28.5,left:0,top:510},sprite_14:{height:27.5,width:29,left:0,top:520},sprite_5:{height:10.5,width:29.5,left:0,top:547.5},sprite_15:{height:29.5,width:29.5,left:0,top:558},sprite_16:{height:33.5,width:31,left:0,top:587.5}}},h={config:{totalCount:21,sprite_0:{width:50,height:62,left:5,top:5},sprite_1:{width:53,height:68,left:65,top:5},sprite_10:{width:50,height:64,left:128,top:5},sprite_11:{width:50,height:67,left:188,top:5},sprite_12:{width:39,height:68,left:248,top:5},sprite_13:{width:35,height:68,left:5,top:83},sprite_14:{width:32,height:68,left:50,top:83},sprite_15:{width:33,height:68,left:92,top:83},sprite_16:{width:32,height:68,left:135,top:83},sprite_17:{width:35,height:72,left:177,top:83},sprite_18:{width:36,height:73,left:222,top:83},sprite_19:{width:44,height:69,left:5,top:166},sprite_2:{width:48,height:68,left:59,top:166},sprite_20:{width:48,height:65,left:117,top:166},sprite_21:{width:49,height:63,left:175,top:166},sprite_3:{width:48,height:69,left:234,top:166},sprite_4:{width:44,height:68,left:297,top:5},sprite_5:{width:39,height:72,left:268,top:83},sprite_6:{width:40,height:71,left:292,top:165},sprite_7:{width:44,height:68,left:5,top:246},sprite_8:{width:50,height:63,left:59,top:246},sprite_9:{width:53,height:63,left:119,top:246}}},u={RV:980,VX:240},p={wall:{width:35,height:35},life:{width:63.5,height:24},badflower:{width:27.5,height:29},monster:{width:20,height:24.4},tortoise:{width:21.6,height:26.8},tower:{width:237.15,height:205.2},shell:{width:18,height:17.2},hole:{width:167*.7,height:73*.7},bullet:{width:24,height:24},MAX:{width:45},flower:{width:35,height:35},star:{width:35,height:35},mushroom:{width:35,height:35},money:{width:35,height:35},mario:{bigstatus:{width:33,height:68},smallstatus:{width:16.5,height:34}},pipe:{width:45,height:94},flag:{width:40.5,height:35},final:{width:37.5,height:225}},c={normalSprite:{width:35,height:35,left:150.5,top:0},abnormalwall:{height:35,width:35,left:80.5,top:0},afterabnormalSprite:{height:35,width:35,left:115.5,top:0},leftupSprite:{height:16.1,width:16.1,left:0,top:0},leftdownSprite:{height:21,width:21,left:35.7,top:0},rightupSprite:{height:23.1,width:24.5,left:56,top:0},rightdownSprite:{height:21,width:19.6,left:16.7,top:0}},m={bigJumpV:320,smallJumpV:200},d={mycanvas:document.getElementById("mycanvas"),mycanvasWidth:document.getElementById("mycanvas").width,mycanvasHeight:document.getElementById("mycanvas").height,progressDiv:document.getElementById("load"),tipDiv:document.querySelector(".tip"),progressBox:document.querySelector(".loadDiv")},f={shellSpeed:100,monsterSpeed:70,objectSpeed:60,progressObjSpeed:-2,objectSpeedRate:30,skySpeed:32,setSpeedDefault:function(){this.objectSpeed=60,this.progressObjSpeed=-2,this.skySpeed=60},setSpeedZero:function(){this.objectSpeed=0,this.progressObjSpeed=0,this.skySpeed=0},roadHeight:10};i.publicConfig=o,i.monsterConfig=a,i.tortoiseConfig=n,i.shellConfig=s,i.lifeConfig=r,i.badFlowerConfig=l,i.marioConfig=h,i.bulletConfig=u,i.WH=p,i.wallConfig=c,i.marioGameConfig=m,i.element=d,i.gameConfig=f},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a={isClass:function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)},removeByValue:function(t,i,e){for(var o=0;o<t.length;o++)if(t[o][i]==e){t.splice(o,1);break}},removeElement:function(t){if(t){var i=t.parentNode;i&&i.removeChild(t)}},sort:function(t,i,e){function o(t,e){var o=t[i],n=e[i];return o<n?0==a?-1:1:o>n?0==a?1:-1:0}var a=e||0;t.sort(o)},getSign:function(t){return 0===t?0:t/Math.abs(t)},newGuid:function(){for(var t="",i=1;i<=32;i++){t+=Math.floor(16*Math.random()).toString(16)}return t},deepClone:function(t){var i=void 0,e=this.isClass(t);if("Object"===e)i={};else{if("Array"!==e)return t;i=[]}for(var o in t){var a=t[o];"Object"==this.isClass(a)?i[o]=arguments.callee.bind(this)(a):"Array"==this.isClass(a)?i[o]=arguments.callee.bind(this)(a):i[o]=t[o]}return i},convertToObject:function(t,i){var e=void 0,o=this.isClass(t);if("Object"===o)e={};else{if("Array"!==o)return t;e=[]}for(var n in t){var s=t[n];"Object"==this.isClass(s)?e[n]=a.convertToObject(s,i):"Array"==this.isClass(s)?e[n]=a.convertToObject(s,i):this.chkFormat(t[n],"img")?(e[n]=new Image,e[n].src=t[n],i.sourceNum++,e[n].addEventListener("load",function(t){i.currentNum++,i.loadedCallback(t)}),e[n].addEventListener("error",function(t){i.currentNum++,i.loadedCallback(t)})):this.chkFormat(t[n],"audio")?(e[n]=new Audio(t[n]),i.sourceNum++,e[n].addEventListener("loadedmetadata",function(t){i.currentNum++,i.loadedCallback(t)})):e[n]=t[n]}return e},jQueryExtend:function(){var t=void 0,i=void 0,e=void 0,a=void 0,n=void 0,s=void 0,r=arguments[0]||{},l=1,h=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[l]||{},l++),"object"===(void 0===r?"undefined":o(r))||jQuery.isFunction(r)||(r={}),l===h&&(r=this,l--);l<h;l++)if(null!=(t=arguments[l]))for(i in t)e=r[i],a=t[i],r!==a&&(u&&a&&(jQuery.isPlainObject(a)||(n=jQuery.isArray(a)))?(n?(n=!1,s=e&&jQuery.isArray(e)?e:[]):s=e&&jQuery.isPlainObject(e)?e:{},r[i]=jQuery.extend(u,s,a)):void 0!==a&&(r[i]=a));return r},Regexs:{url:/^http:\/\/([0-9a-z][0-9a-z\-]*\.)+[a-z]{2,}(:\d+)?\/[0-9a-z%\-_\/\.]+/i,cnum:/[^0-9a-zA-Z_.-]/,img:/\.jpg$|\.jpeg$|\.png$|\.gif$/i,audio:/\.mp3$|\.wmv$/i,photo1:/\.(jpe?g|gif)$/i},chkChinese:function(t){for(var i=0;i<t.length;i++)if(t.charCodeAt(i)>255)return!0;return!1},chkFormat:function(t,i){var e=this.Regexs[i];return null!=t&&""!=t&&("num"==i?!e.test(t)&&!this.chkChinese(t):!!e.test(t))}};i.lib=a},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o={smallJump:{startTime:.5,endTime:2},bigJump:{startTime:3.2,endTime:4},eatMushroom:{startTime:5,endTime:7},intoPipe:{startTime:8,endTime:9},monsterDie:{endTime:11},GameOver:{startTime:0,endTime:5},eatMoney:{startTime:7,endTime:7.5},flowerup:{startTime:9.8,endTime:11.5},fire:{startTime:11.3,endTime:11.6},downflag:{startTime:9,endTime:11.5},gameSuccess:{startTime:0,endTime:7},growup:{startTime:5.5,endTime:7},changeSmall:{startTime:8.5,endTime:9.5},hitwall:{startTime:4.9,endTime:5},wallbreak:{startTime:3.4,endTime:3.9},WD:{startTime:0,endTime:20},die:{startTime:.5,endTime:4},monsterdie:{startTime:.5,endTime:1},monsterShootDie:{startTime:2.6,endTime:3}},a={audioPlay:function(t,i){t.currentTime=i.startTime,t.endTime=i.endTime,t.play()},BGMPlay:function(t){t.loop=!0,t.volume=.2,t.play()},BGMPause:function(t){t.pause()},timeupdateAddEventListener:function(t){t.addEventListener("timeupdate",function(){this.currentTime>this.endTime&&this.pause()},!1)}};i.gameAudio=o,i.audioControl=a},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.createFactory=i.totalProgressSprite=i.PJNum=i.progressObj=void 0;var o=e(14),a=function(t){return t&&t.__esModule?t:{default:t}}(o),n=e(0),s=e(2),r=e(4),l=e(1),h={mileageNum:0,totaltime:300,velocityX:0,currentTime:300,fpsNum:60,countDownWatch:new a.default,createSpriteMileNum:0,mileageNumUpdate:function(t){this.fpsNum=0==t?1:t||this.fpsNum,this.mileageNum+=this.velocityX/this.fpsNum,this.createSpriteMileNum=this.mileageNum*n.gameConfig.objectSpeedRate},countDownNumUpdate:function(){this.currentTime=this.totaltime-this.countDownWatch.getElapsedTime()/1e3},countDownStart:function(){this.countDownWatch.start()},countDownPause:function(){this.countDownWatch.stop(),this.totaltime=this.currentTime}},u={wall1:500,wall2:2150,wall3:2150+10*n.WH.wall.width+n.WH.monster.width+20,wall4:2150+10*n.WH.wall.width+n.WH.monster.width+20+60*n.WH.wall.width+n.WH.hole.width+n.WH.pipe.width-20,wallTop:100,wallTop2:140,money1:700,pipe1:550,hole1:700,badflower1:500,final1:2150+10*n.WH.wall.width+n.WH.monster.width+20+60*n.WH.wall.width+n.WH.hole.width+n.WH.pipe.width-20+20*n.WH.wall.width+n.WH.monster.width+20},p={wall:[{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall1,physicaltop:u.wallTop,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall1+100,physicaltop:u.wallTop,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall1+100+n.WH.wall.width,physicaltop:u.wallTop,contain:2},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall1+100+2*n.WH.wall.width,physicaltop:u.wallTop,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall1+100+2*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:1},{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall1+100+3*n.WH.wall.width,physicaltop:u.wallTop,contain:1},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall1+100+4*n.WH.wall.width,physicaltop:u.wallTop,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall2+0,physicaltop:u.wallTop,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall2+n.WH.wall.width,physicaltop:u.wallTop,contain:2},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall2+2*n.WH.wall.width,physicaltop:u.wallTop,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall2+3*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall2+4*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall2+5*+n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall2+6*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall2+7*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall2+8*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall2+9*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+1*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+2*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+3*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall3+4*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:1},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+4*n.WH.wall.width,physicaltop:u.wallTop,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+7*n.WH.wall.width,physicaltop:u.wallTop,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+8*n.WH.wall.width,physicaltop:u.wallTop,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall3+13*n.WH.wall.width,physicaltop:u.wallTop,contain:4},{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall3+16*n.WH.wall.width,physicaltop:u.wallTop,contain:1},{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall3+16*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:1},{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall3+19*n.WH.wall.width,physicaltop:u.wallTop,contain:1},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+25*n.WH.wall.width,physicaltop:u.wallTop,moneyCount:5,contain:1},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+28*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+29*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+30*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+35*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall3+36*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:1},{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall3+37*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:1},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+36*n.WH.wall.width,physicaltop:u.wallTop,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+37*n.WH.wall.width,physicaltop:u.wallTop,contain:0},{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall3+38*n.WH.wall.width,physicaltop:u.wallTop+u.wallTop2,contain:0},,{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall4+7*n.WH.wall.width,physicaltop:u.wallTop,contain:0},,{isVisible:!0,id:l.lib.newGuid(),status:0,positionmile:u.wall4+8*n.WH.wall.width,physicaltop:u.wallTop,contain:0},,{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall4+9*n.WH.wall.width,physicaltop:u.wallTop,contain:1},,{isVisible:!0,id:l.lib.newGuid(),status:1,positionmile:u.wall4+10*n.WH.wall.width,physicaltop:u.wallTop,contain:1}],money:[{isVisible:!0,id:l.lib.newGuid(),physicaltop:u.wallTop,positionmile:u.money1+500},{isVisible:!0,id:l.lib.newGuid(),physicaltop:u.wallTop,positionmile:u.money1+600}],pipe:[{isVisible:!0,id:l.lib.newGuid(),physicaltop:-40,positionmile:u.pipe1+440},{isVisible:!0,id:l.lib.newGuid(),physicaltop:-20,positionmile:u.pipe1+640},{isVisible:!0,id:l.lib.newGuid(),physicaltop:0,positionmile:u.pipe1+840},{isVisible:!0,id:l.lib.newGuid(),physicaltop:0,positionmile:u.pipe1+1040},{isVisible:!0,id:l.lib.newGuid(),physicaltop:0,positionmile:u.wall3+40*n.WH.wall.width+n.WH.monster.width+20},{isVisible:!0,id:l.lib.newGuid(),physicaltop:0,positionmile:u.wall3+47*n.WH.wall.width},{isVisible:!0,id:l.lib.newGuid(),physicaltop:0,positionmile:u.wall3+60*n.WH.wall.width+15},{isVisible:!0,id:l.lib.newGuid(),physicaltop:0,positionmile:u.wall3+60*n.WH.wall.width+n.WH.hole.width+n.WH.pipe.width-20},{isVisible:!0,id:l.lib.newGuid(),physicaltop:-20,positionmile:u.wall4+4*n.WH.wall.width},{isVisible:!0,id:l.lib.newGuid(),physicaltop:-20,positionmile:u.wall4+11*n.WH.wall.width+n.WH.monster.width+20}],final:[{isVisible:!0,id:l.lib.newGuid(),physicaltop:-10,positionmile:u.final1}],flag:[{isVisible:!0,id:l.lib.newGuid(),physicaltop:162,positionmile:u.final1+20}],fire:[],badflower:[{isVisible:!0,id:l.lib.newGuid(),physicaltop:0,positionmile:u.wall3+55*n.WH.wall.width},{isVisible:!0,id:l.lib.newGuid(),physicaltop:0,positionmile:u.wall3+37*n.WH.wall.width}],monster:[{isDie:!1,isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.pipe1+740},{isDie:!1,isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.pipe1+940},{isDie:!1,isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.pipe1+945+n.WH.monster.width+15},{isDie:!1,isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.wall2+17*n.WH.wall.width},{isDie:!1,isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.wall2+17*n.WH.wall.width+n.WH.monster.width+20},{isDie:!1,isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.wall3+30*n.WH.wall.width},{isDie:!1,isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.wall3+30*n.WH.wall.width+n.WH.monster.width+20},{isDie:!1,isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.wall3+37*n.WH.wall.width},{isDie:!1,isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.wall3+37*n.WH.wall.width+n.WH.monster.width+20},{isDie:!1,isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.wall4+8*n.WH.wall.width},{isDie:!1,isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.wall4+8*n.WH.wall.width+n.WH.monster.width+20}],tortoise:[{isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:600},{isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.wall3+16*n.WH.wall.width},{isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.wall3+20*n.WH.wall.width},{isAdd:!1,isMonster:!0,isVisible:!0,id:l.lib.newGuid(),positionmile:u.wall3+50*n.WH.wall.width}],star:[],tower:[{isReverse:!1,isVisible:!0,id:l.lib.newGuid(),physicaltop:0,positionmile:-6},{isReverse:!0,isVisible:!0,id:l.lib.newGuid(),physicaltop:0,positionmile:u.final1+234}],hole:[{isVisible:!0,id:l.lib.newGuid(),physicaltop:-33,positionmile:u.pipe1+1340},{isVisible:!0,id:l.lib.newGuid(),physicaltop:-33,positionmile:u.wall2+7*n.WH.wall.width},{isVisible:!0,id:l.lib.newGuid(),physicaltop:-33,positionmile:u.wall3+60*n.WH.wall.width+n.WH.pipe.width}]},c={arrayTotalProgress:[],createUpMoney:function(t,i){var e=new r.Money({physicaltop:i,positionmile:t,id:l.lib.newGuid(),jumpEndCallback:SpriteAnimatorEndCallbackList.moneyupend});e.up(200),drawSpriteList.createSpriteList.push(e)},createUpFlower:function(t,i){var e=new r.Flower({physicaltop:i,positionmile:t,id:l.lib.newGuid()});e.up(100),drawSpriteList.createSpriteList.push(e)},createUpMushroom:function(t,i){var e=new r.Mushroom({physicaltop:i,positionmile:t,id:l.lib.newGuid()});e.up(200),drawSpriteList.createAnimationSpriteList.push(e)},createBadflower:function(t){return new r.BadFlower({id:t.id,physicaltop:t.physicaltop,positionmile:t.positionmile,left:t.positionmile-h.createSpriteMileNum})},createStar:function(t,i){var e=new r.Star({physicaltop:i,positionmile:t,id:l.lib.newGuid(),jumpEndCallback:function(t){t.up(150)}});e.up(200),e.move(-50),drawSpriteList.createAnimationSpriteList.push(e)},createBullet:function(t,i,e){var o=new r.Bullet({top:i,positionmile:t,id:l.lib.newGuid()});e?o.jump(-n.bulletConfig.VX):o.jump(n.bulletConfig.VX),s.audioControl.audioPlay(gameSourceObj.audioList.jumpAll,s.gameAudio.fire),drawSpriteList.createBulletSpriteList.push(o)},createWall:function(t){t.status=t.status||0;return new r.Wall({id:t.id,contain:t.contain,physicaltop:t.physicaltop,positionmile:t.positionmile,status:t.status,moneyCount:t.moneyCount,left:t.positionmile-h.createSpriteMileNum})},createPipe:function(t){return new r.Pipe({id:t.id,physicaltop:t.physicaltop,positionmile:t.positionmile,left:t.positionmile-h.createSpriteMileNum})},createFinal:function(t){return new r.Final({id:t.id,physicaltop:t.physicaltop,positionmile:t.positionmile,left:t.positionmile-h.createSpriteMileNum})},createFlag:function(t){return new r.Flag({id:t.id,physicaltop:t.physicaltop,positionmile:t.positionmile,callback:function(){drawSpriteList.success()},left:t.positionmile-h.createSpriteMileNum})},createMoney:function(t){return new r.Money({id:t.id,physicaltop:t.physicaltop,positionmile:t.positionmile,left:t.positionmile-h.createSpriteMileNum})},createBrick:function(t,i){["leftup","leftdown","rightup","rightdown"].forEach(function(e){var o=new r.Brick({id:l.lib.newGuid(),physicaltop:i,positionmile:t,status:e,jumpEndCallback:SpriteAnimatorEndCallbackList.brickupend});o.up(),drawSpriteList.createBrickSpriteList.push(o)})},createFlower:function(t){return new r.Flower({id:t.id,physicaltop:t.physicaltop,positionmile:t.positionmile,left:t.positionmile-h.createSpriteMileNum})},createMonster:function(t){if(!t.isAdd&&!t.isDie){t.isAdd=!0;var i=new r.Monster({id:t.id,positionmile:t.positionmile,left:t.positionmile-h.createSpriteMileNum});drawSpriteList.createAnimationSpriteList.push(i)}},createTortoise:function(t){if(!t.isAdd&&!t.isDie){t.isAdd=!0;var i=new r.Tortoise({id:t.id,positionmile:t.positionmile,left:t.positionmile-h.createSpriteMileNum});drawSpriteList.createAnimationSpriteList.push(i)}},createTower:function(t){return new r.Tower({isReverse:t.isReverse,id:t.id,physicaltop:t.physicaltop,positionmile:t.positionmile,left:t.positionmile-h.createSpriteMileNum})},createHole:function(t){return new r.Hole({id:t.id,physicaltop:t.physicaltop,positionmile:t.positionmile,left:t.positionmile-h.createSpriteMileNum})},nameToCreateFun:{wall:"createWall",money:"createMoney",pipe:"createPipe",badflower:"createBadflower",monster:"createMonster",tortoise:"createTortoise",star:"createStar",tower:"createTower",final:"createFinal",hole:"createHole",flag:"createFlag"},hasId:function(t,i){return i.some(function(i){return i.id==t})},insertDrawSpriteList:function(t,i){i.forEach(function(t){if(!t.visible||t.positionmile-h.createSpriteMileNum<-t.width||t.positionmile-h.createSpriteMileNum>n.element.mycanvasWidth){var e=t.id;l.lib.removeByValue(i,"id",e)}});var e=this;this.arrayTotalProgress.forEach(function(t){if(t.isVisible&&t.positionmile-h.createSpriteMileNum>=-n.WH[t.name].width&&t.positionmile-h.createSpriteMileNum<=n.element.mycanvasWidth){var o=t.id;e.hasId(o,i)||(t.isMonster?e[e.nameToCreateFun[t.name]](t):i.push(e[e.nameToCreateFun[t.name]](t)))}})},init:function(){var t=this;for(var i in p)!function(i){p[i].forEach(function(t){t.name=i}),t.arrayTotalProgress=t.arrayTotalProgress.concat(p[i])}(i);l.lib.sort(this.arrayTotalProgress,"positionmile",0)}};i.progressObj=h,i.PJNum=u,i.totalProgressSprite=p,i.createFactory=c},function(t,i,e){"use strict";function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function a(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function n(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}Object.defineProperty(i,"__esModule",{value:!0}),i.BG=i.Brick=i.Hole=i.Tower=i.Flag=i.Final=i.Pipe=i.Bullet=i.Star=i.Mushroom=i.BadFlower=i.Flower=i.Money=i.Wall=i.Over=i.Life=i.Shell=i.Tortoise=i.Monster=i.Mario=i.SceneImagePainter=i.SceneSprite=i.CharacterRiseSpriteSheetPainter=i.CharacterRunSpriteSheetPainter=i.CharacterImagePainter=void 0;var s=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}(),r=e(15),l=e(1),h=e(16),u=e(3),p=e(0),c=e(17),m=e(2),d=e(5),f=function(t){return t&&t.__esModule?t:{default:t}}(d),g=e(18),w=e(19),v=function(t){function i(t){return o(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t))}return n(i,t),s(i,[{key:"paint",value:function(t,i,e){if(t.isReverse)i.drawImage(this.image,t.left,t.top,t.width,t.height);else{var o=t.mycanvas;i.translate(o.width,0),i.scale(-1,1),i.drawImage(this.image,o.width-t.width-t.left,t.top,t.width,t.height),i.translate(o.width,0),i.scale(-1,1)}}}]),i}(g.ImagePainter),y=function(t){function i(t,e,n,s){o(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n));return r.imgcount=s,r}return n(i,t),s(i,[{key:"paint",value:function(t,i){var e=this.cells["sprite_"+this.cellIndex];if(t.isReverse)i.drawImage(this.spritesheet,e.left,e.top,e.width,e.height,t.left,t.top,t.width,t.height);else{var o=this.mycanvas;i.translate(o.width,0),i.scale(-1,1),i.drawImage(this.spritesheet,e.left,e.top,e.width,e.height,o.width-t.width-t.left,t.top,t.width,t.height),i.translate(o.width,0),i.scale(-1,1)}}},{key:"advance",value:function(t,i){++this.cellIndex==this.imgcount&&(this.cellIndex=0)}}]),i}(r.SpriteSheetPainter),b=function(t){function i(t,e,n,s){o(this,i);var r=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n));return r.imgcount=s,r}return n(i,t),s(i,[{key:"paint",value:function(t,i){var e=this.cells["sprite_"+this.cellIndex];if(t.width=e.width,t.height=e.height,t.top=p.element.mycanvasHeight-t.height-p.gameConfig.roadHeight-t.physicaltop,t.isReverse)i.drawImage(this.spritesheet,e.left,e.top,e.width,e.height,t.left,t.top,t.width,t.height);else{var o=this.mycanvas;i.translate(o.width,0),i.scale(-1,1),i.drawImage(this.spritesheet,e.left,e.top,e.width,e.height,o.width-t.width-t.left,t.top,t.width,t.height),i.translate(o.width,0),i.scale(-1,1)}}},{key:"advance",value:function(t,i){++this.cellIndex==this.imgcount&&(this.cellIndex=0)}}]),i}(r.SpriteSheetPainter),S=function(t){function i(t,e,n){return o(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e,n))}return n(i,t),s(i,[{key:"update",value:function(t,i,e){for(var o=this.behaviors.length;o>0;--o)this.behaviors[o-1].execute(this,t,i,e)}}]),i}(h.Sprite),C=function(t){function i(t){return o(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t))}return n(i,t),s(i,[{key:"paint",value:function(t,i){this.image&&(t.imgwidth?i.drawImage(this.image,t.imgleft,t.imgtop,t.imgwidth,t.imgheight,t.left,t.top,t.width,t.height):i.drawImage(this.image,t.left,t.top,t.width,t.height))}}]),i}(g.ImagePainter),L=function(t){function i(t){o(this,i);var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name));return e.isDie=!1,e.isReverse=t.isReverse,e.painters={run:new y(p.marioConfig.config,f.default.imageList.mario.commonMairo.run,p.element.mycanvas,p.marioConfig.config.totalCount),jump:new v(f.default.imageList.mario.commonMairo.jump),stand:new v(f.default.imageList.mario.commonMairo.stand),laqi:new v(f.default.imageList.mario.commonMairo.laqi)},e.mycanvas=p.element.mycanvas,e.width=t.width||p.WH.mario.smallstatus.width,e.height=t.height||p.WH.mario.smallstatus.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-p.gameConfig.roadHeight-e.physicaltop,e.left=e.mycanvas.width/3-e.width/2,e.GRAVITY_FORCE=p.publicConfig.GRAVITY_FORCE,e.isJump=!1,e.jumpPainter=e.painters.jump,e.upColliding=null,e.risespeed=0,e.initialTop=e.top,e.behaviorStatus={runInPlace:new c.behaviorList.runInPlace},e.lifeNum=3,e.status=1,e.painter=e.painters.stand,e.marioSpriteAnimatorJump=new w.CharacterSpriteAnimator(SpriteAnimatorEndCallbackList.marioJumpend,e),e.marioSpriteAnimatorRising=new w.RiseSpriteAnimator(null,e),e.marioSpriteAnimatorMove=new w.MairoSpriteAnimator(t.success,e),e.initvelocityX=-p.gameConfig.monsterSpeed,e}return n(i,t),s(i,[{key:"setClothes",value:function(t){this.painters.run.spritesheet.src=f.default.imageList.mario[t].run,this.painters.jump.image.src=f.default.imageList.mario[t].jump,this.painters.stand.image.src=f.default.imageList.mario[t].stand,this.painters.laqi.image.src=f.default.imageList.mario[t].laqi}},{key:"laqi",value:function(){this.painter=this.painters.laqi,this.velocityY=0,this.behaviors=[],this.translateLeft=-this.left}},{key:"reset",value:function(){this.isDie=!1,this.painter=this.painters.stand,this.status=1,this.setClothes("commonMairo"),this.height=p.WH.mario.smallstatus.height,this.width=p.WH.mario.smallstatus.width,this.initialTop=p.element.mycanvasHeight-this.height-p.gameConfig.roadHeight,this.top=p.element.mycanvasHeight-this.height-p.gameConfig.roadHeight-this.physicaltop,this.left=this.mycanvas.width/3-this.width/2}},{key:"jump",value:function(t){if(!this.isDie)switch(t){case p.marioGameConfig.smallJumpV:m.audioControl.audioPlay(gameSourceObj.audioList.jumpAll,m.gameAudio.smallJump);break;case p.marioGameConfig.bigJumpV:m.audioControl.audioPlay(gameSourceObj.audioList.jumpAll,m.gameAudio.bigJump)}this.velocityY=-t,this.behaviors=[],this.painter=this.jumpPainter,this.marioSpriteAnimatorJump.start()}},{key:"rise",value:function(t,i){if(t>this.height?this.risespeed=30:t<this.height?this.risespeed=-30:this.risespeed=0,4!=this.status){switch(i){case 1:case 2:this.setClothes("commonMairo");break;case 3:this.setClothes("fireMairo");break;case 4:this.setClothes("invinciblefireMairo"),m.audioControl.BGMPause(gameSourceObj.audioList.BGM),m.audioControl.audioPlay(gameSourceObj.audioList.WD,m.gameAudio.WD),gameSourceObj.audioList.WD.volume=.4}this.originalStatus=this.status,this.status=i}else this.originalStatus=i;this.status4DuringTime=u.progressObj.currentTime-20,t<this.height?m.audioControl.audioPlay(gameSourceObj.audioList.jumpAll,m.gameAudio.changeSmall):m.audioControl.audioPlay(gameSourceObj.audioList.jumpAll,m.gameAudio.growup),this.initialHeight=t,this.marioSpriteAnimatorRising.start()}},{key:"die",value:function(){this.isDie||(this.isDie=!0,this.lifeNum--,console.log("die"),this.initialTop=p.element.mycanvasHeight+200,this.isJump||this.jump(0)),m.audioControl.audioPlay(gameSourceObj.audioList.die,m.gameAudio.die)}},{key:"collisiondie",value:function(){this.isDie||(this.isDie=!0,this.lifeNum--,this.initialTop=p.element.mycanvasHeight+200,this.isJump||this.jump(p.marioGameConfig.smallJumpV/2),m.audioControl.audioPlay(gameSourceObj.audioList.die,m.gameAudio.die))}},{key:"intoTower",value:function(){this.positionmile=u.progressObj.createSpriteMileNum,this.marioSpriteAnimatorMove.start(),this.painter=this.painters.run,this.behaviors=[this.behaviorStatus.runInPlace,new c.behaviorList.SpriteLeftToRight],m.audioControl.BGMPause(gameSourceObj.audioList.BGM),m.audioControl.audioPlay(gameSourceObj.audioList.gamesuccess,m.gameAudio.gameSuccess)}},{key:"draw",value:function(t,i,e){if(this.fpsNum=e,this.marioSpriteAnimatorJump.execute(),this.marioSpriteAnimatorRising.execute(),this.marioSpriteAnimatorMove.execute(),4==this.status&&this.status4DuringTime>u.progressObj.currentTime)switch(this.status=this.originalStatus,console.log("恢复"),m.audioControl.BGMPlay(gameSourceObj.audioList.BGM),this.status){case 1:case 2:this.setClothes("commonMairo");break;case 3:this.setClothes("fireMairo");break;case 4:this.setClothes("invinciblefireMairo")}this.update(t,i,e),this.paint(t)}}]),i}(h.Sprite),T=function(t){function i(t){o(this,i);var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name));return e.painters={run:new y(p.monsterConfig.config,f.default.imageList.monster,p.element.mycanvas,p.monsterConfig.config.totalCount),collisiondie:new v(f.default.imageList.monsterDie)},e.isDie=!1,e.isReverse=!1,e.mycanvas=p.element.mycanvas,e.name="monster",e.translateLeft=0,e.id=l.lib.newGuid(),e.width=t.width||p.WH.monster.width,e.height=t.height||p.WH.monster.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-p.gameConfig.roadHeight-e.physicaltop,e.left=t.left||e.mycanvas.width-e.width/2,e.positionmile=t.positionmile,e.GRAVITY_FORCE=p.publicConfig.GRAVITY_FORCE,e.isJump=!1,e.initvelocityX=p.gameConfig.monsterSpeed,e.upColliding=null,e.initialTop=e.top,e.behaviorStatus={runInPlace:new c.behaviorList.runInPlace({PAGEFLIP_INTERVAL:100})},e.behaviors=[e.behaviorStatus.runInPlace,new c.behaviorList.SpriteLeftToRight],e.status=1,e.painter=e.painters.run,e.monsterSpriteAnimatorJump=new w.CharacterSpriteAnimator(SpriteAnimatorEndCallbackList.monsterJumpend,e),e.monsterSpriteAnimatorMove=new w.MoveSpriteAnimator(null,e),e.monsterSpriteAnimatorMove.start(),e}return n(i,t),s(i,[{key:"jump",value:function(t){this.velocityY=-t,this.monsterSpriteAnimatorJump.start()}},{key:"collisionDie",value:function(){this.initvelocityX=0,this.behaviors=[new c.behaviorList.SpriteLeftToRight],this.isDie=!0,m.audioControl.audioPlay(gameSourceObj.audioList.collision,m.gameAudio.monsterdie),this.painter=this.painters.collisiondie}},{key:"die",value:function(){this.jump(0),this.isDie=!0}},{key:"shootDie",value:function(){this.isDie||(this.isDie=!0,this.behaviors=[this.behaviorStatus.runInPlace],this.initialTop=p.element.mycanvasHeight+200,this.isJump||(m.audioControl.audioPlay(gameSourceObj.audioList.collision,m.gameAudio.monsterShootDie),this.jump(p.marioGameConfig.smallJumpV/2)))}},{key:"draw",value:function(t,i,e){this.fpsNum=e,gameControl.gamePause||(this.monsterSpriteAnimatorMove.execute(),this.monsterSpriteAnimatorJump.execute(),this.update(t,i,e)),this.paint(t)}},{key:"fall",value:function(t){this.velocityY=-t,console.log("fall"),this.initialTop=p.element.mycanvasHeight-this.height-p.gameConfig.roadHeight,this.monsterSpriteAnimatorJump.start()}}]),i}(h.Sprite),A=function(t){function i(t){o(this,i);var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name));return e.isDie=!1,e.isReverse=!0,e.id=l.lib.newGuid(),e.mycanvas=p.element.mycanvas,e.name="tortoise",e.translateLeft=0,e.width=t.width||p.WH.tortoise.width,e.height=t.height||p.WH.tortoise.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-p.gameConfig.roadHeight,e.left=t.left||e.mycanvas.width/2-e.width/2,e.positionmile=t.positionmile,e.GRAVITY_FORCE=p.publicConfig.GRAVITY_FORCE,e.isJump=!1,e.initvelocityX=p.gameConfig.monsterSpeed,e.painters={run:new y(p.tortoiseConfig.config,f.default.imageList.tortoise,p.element.mycanvas,p.tortoiseConfig.config.totalCount)},e.upColliding=null,e.initialTop=e.top,e.behaviorStatus={runInPlace:new c.behaviorList.runInPlace({PAGEFLIP_INTERVAL:40})},e.behaviors=[e.behaviorStatus.runInPlace,new c.behaviorList.SpriteLeftToRight],e.painter=e.painters.run,e.tortoiseSpriteAnimatorJump=new w.CharacterSpriteAnimator(SpriteAnimatorEndCallbackList.tortoiseJumpend,e),e.tortoiseSpriteAnimatorMove=new w.MoveSpriteAnimator(null,e),e.tortoiseSpriteAnimatorMove.start(),e}return n(i,t),s(i,[{key:"jump",value:function(t){this.velocityY=-t,this.tortoiseSpriteAnimatorJump.start()}},{key:"die",value:function(){this.jump(0)}},{key:"draw",value:function(t,i,e){gameControl.gamePause||(this.fpsNum=e,this.tortoiseSpriteAnimatorMove.execute(),this.tortoiseSpriteAnimatorJump.execute(),this.update(t,i,e)),this.paint(t)}},{key:"fall",value:function(t){this.velocityY=-t,this.initialTop=p.element.mycanvasHeight-this.height-p.gameConfig.roadHeight,this.tortoiseSpriteAnimatorJump.start()}},{key:"collisionDie",value:function(){this.initvelocityX=0,this.behaviors=[new c.behaviorList.SpriteLeftToRight],this.isDie=!0,m.audioControl.audioPlay(gameSourceObj.audioList.collision,m.gameAudio.monsterdie),this.painter=this.painters.collisiondie}},{key:"shootDie",value:function(){this.isDie||(this.isDie=!0,this.behaviors=[this.behaviorStatus.runInPlace],this.initialTop=p.element.mycanvasHeight+200,this.isJump||(m.audioControl.audioPlay(gameSourceObj.audioList.collision,m.gameAudio.monsterShootDie),this.jump(p.marioGameConfig.smallJumpV/2)))}}]),i}(h.Sprite),_=function(t){function i(t){o(this,i);var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name));return e.isDie=!1,e.isReverse=!0,e.id=l.lib.newGuid(),e.mycanvas=p.element.mycanvas,e.name="shell",e.translateLeft=0,e.painters={run:new y(p.shellConfig.config,f.default.imageList.shell,p.element.mycanvas,p.shellConfig.config.totalCount)},e.width=t.width||p.WH.shell.width,e.height=t.height||p.WH.shell.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-p.gameConfig.roadHeight,e.left=t.left,e.initvelocityX=0,e.positionmile=e.left+u.progressObj.createSpriteMileNum,e.translateLeft=0,e.GRAVITY_FORCE=p.publicConfig.GRAVITY_FORCE,e.isJump=!1,e.upColliding=null,e.initialTop=e.top,e.status=0,e.behaviorStatus={runInPlace:new c.behaviorList.runInPlace({PAGEFLIP_INTERVAL:80})},e.behaviors=[new c.behaviorList.SpriteLeftToRight],e.painter=e.painters.run,e.shellSpriteAnimatorJump=new w.CharacterSpriteAnimator(SpriteAnimatorEndCallbackList.shellJumpend,e),e.shellSpriteAnimatorMove=new w.MoveSpriteAnimator(null,e),e.shellSpriteAnimatorMove.start(),e.painters={run:new y(p.shellConfig.config,f.default.imageList.shell,p.element.mycanvas,p.shellConfig.config.totalCount)},e}return n(i,t),s(i,[{key:"jump",value:function(t){this.velocityY=-t,this.shellSpriteAnimatorJump.start()}},{key:"shoot",value:function(t){this.behaviors=[this.behaviorStatus.runInPlace,new c.behaviorList.SpriteLeftToRight],this.initvelocityX=t,this.status=1}},{key:"pause",value:function(){this.behaviors=[new c.behaviorList.SpriteLeftToRight],this.initvelocityX=0,this.status=0}},{key:"die",value:function(){this.jump(0)}},{key:"draw",value:function(t,i,e){gameControl.gamePause||(this.fpsNum=e,this.shellSpriteAnimatorMove.execute(),this.shellSpriteAnimatorJump.execute(),this.update(t,i,e)),this.paint(t)}},{key:"fall",value:function(t){this.velocityY=-t,this.initialTop=p.element.mycanvasHeight-this.height-p.gameConfig.roadHeight,this.shellSpriteAnimatorJump.start()}},{key:"shootDie",value:function(){this.isDie||(this.isDie=!0,this.behaviors=[this.behaviorStatus.runInPlace],this.initialTop=p.element.mycanvasHeight+200,this.isJump||(m.audioControl.audioPlay(gameSourceObj.audioList.collision,m.gameAudio.monsterShootDie),this.jump(p.marioGameConfig.smallJumpV/2)))}}]),i}(h.Sprite),j=function(t){function i(t){o(this,i);var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name||"life",new C(f.default.imageList.life)));return e.imgwidth=p.lifeConfig.config.sprite_5.width,e.imgheight=p.lifeConfig.config.sprite_5.height,e.imgleft=p.lifeConfig.config.sprite_5.left,e.imgtop=p.lifeConfig.config.sprite_5.top,e.width=p.WH.life.width,e.height=p.WH.life.height,e.top=5,e.left=580,e.status=5,e}return n(i,t),s(i,[{key:"minuteLife",value:function(t){t<=0&&(t=1),this.imgwidth=p.lifeConfig.config["sprite_"+t].width,this.imgheight=p.lifeConfig.config["sprite_"+t].height,this.imgleft=p.lifeConfig.config["sprite_"+t].left,this.imgtop=p.lifeConfig.config["sprite_"+t].top}},{key:"draw",value:function(t,i,e){this.paint(t)}}]),i}(h.Sprite),O=function(t){function i(t){o(this,i);var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name||"over",new C(f.default.imageList.gameOver)));return e.width=p.element.mycanvasWidth,e.height=p.element.mycanvasHeight,e.top=0,e.left=0,e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){this.paint(t)}}]),i}(h.Sprite),P=function(t){function i(t){o(this,i);var e=t.status||0,n=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name||"wall",new C(f.default.imageList.wall),[new c.behaviorList.SpriteLeftToRight])),s=n;switch(n.width=t.width||p.WH.wall.width,n.id=t.id||0,n.positionmile=t.positionmile||0,n.moneyCount=t.moneyCount||0,n.height=t.height||p.WH.wall.height,n.physicaltop=t.physicaltop||0,n.top=p.element.mycanvasHeight-n.height-p.gameConfig.roadHeight-n.physicaltop,n.left=t.left||0,n.contain=t.contain||0,n.status=e,n.GRAVITY_FORCE=p.publicConfig.GRAVITY_FORCE,n.initialTop=n.top,n.isJump=!1,n.jumpPainter=new C(f.default.imageList.wall),e){case 0:n.imgwidth=p.wallConfig.normalSprite.width,n.imgheight=p.wallConfig.normalSprite.height,n.imgleft=p.wallConfig.normalSprite.left,n.imgtop=p.wallConfig.normalSprite.top;break;case 1:n.imgwidth=p.wallConfig.abnormalwall.width,n.imgheight=p.wallConfig.abnormalwall.height,n.imgleft=p.wallConfig.abnormalwall.left,n.imgtop=p.wallConfig.abnormalwall.top,n.mycanvas=p.element.mycanvas;break;case 2:n.imgwidth=p.wallConfig.afterabnormalSprite.width,n.imgheight=p.wallConfig.afterabnormalSprite.height,n.imgleft=p.wallConfig.afterabnormalSprite.left,n.imgtop=p.wallConfig.afterabnormalSprite.top}return n.mycanvas=p.element.mycanvas,n.wallSpriteAnimatorUp=new w.CharacterSpriteAnimator(s.jumpend.bind(s),n),n}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||(this.wallSpriteAnimatorUp.execute(),this.fpsNum=e,this.update(t,i,e)),this.paint(t)}},{key:"up",value:function(t){this.velocityY=-t,this.wallSpriteAnimatorUp.start()}},{key:"changeToAA",value:function(){this.imgwidth=p.wallConfig.afterabnormalSprite.width,this.imgheight=p.wallConfig.afterabnormalSprite.height,this.imgleft=p.wallConfig.afterabnormalSprite.left,this.imgtop=p.wallConfig.afterabnormalSprite.top,this.status=2;var t=this.id;u.totalProgressSprite.wall.forEach(function(i){i.id==t&&(i.status=2)})}},{key:"jumpend",value:function(){this.isJump=!1,this.velocityY=0}}]),i}(S),M=function(t){function i(t){o(this,i),t.name=t.name||"money";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.money),[new c.behaviorList.SpriteLeftToRight]));return e.width=t.width||p.WH.money.width,e.height=t.height||p.WH.money.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-p.gameConfig.roadHeight-t.physicaltop,e.id=t.id||0,e.left=t.left||0,e.positionmile=t.positionmile||0,e.GRAVITY_FORCE=p.publicConfig.GRAVITY_FORCE,e.initialTop=e.top,e.isJump=!1,e.jumpPainter=new C(f.default.imageList.money),e.mycanvas=p.element.mycanvas,e.moneySpriteAnimatorUp=new w.CharacterSpriteAnimator(t.jumpEndCallback,e),e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||(this.fpsNum=e,this.moneySpriteAnimatorUp.execute(),this.update(t,i,e)),this.paint(t)}},{key:"up",value:function(t){this.velocityY=-t,this.moneySpriteAnimatorUp.start()}}]),i}(S),k=function(t){function i(t){o(this,i),t.name=t.name||"flower";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.flower),[new c.behaviorList.SpriteLeftToRight]));return e.width=t.width||p.WH.flower.width,e.height=t.height||p.WH.flower.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-p.gameConfig.roadHeight-t.physicaltop,e.id=t.id||0,e.left=t.left||0,e.positionmile=t.positionmile||0,e.initialTop=e.top,e.isJump=!1,e.mycanvas=p.element.mycanvas,e.flowerSpriteAnimatorUp=new w.UpSpriteAnimator(null,e),e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||(this.fpsNum=e,this.flowerSpriteAnimatorUp.execute(),this.update(t,i,e)),this.paint(t)}},{key:"up",value:function(t){this.initialTop=this.top-p.WH.wall.height,this.velocityY=t,this.flowerSpriteAnimatorUp.start()}}]),i}(S),R=function(t){function i(t){o(this,i),t.name=t.name||"badflower";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.badflower),[new c.behaviorList.SpriteLeftToRight]));return e.width=t.width||p.WH.badflower.width,e.height=t.height||p.WH.badflower.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-p.gameConfig.roadHeight-t.physicaltop,e.id=t.id||0,e.left=t.left||0,e.positionmile=t.positionmile||0,e.behaviorStatus={upInPlace:new c.behaviorList.upInPlace({PAGEFLIP_INTERVAL:80})},e.painter=new b(p.badFlowerConfig.config,f.default.imageList.badflower,p.element.mycanvas,p.badFlowerConfig.config.totalCount),e.behaviors=[e.behaviorStatus.upInPlace,new c.behaviorList.SpriteLeftToRight],e.initialTop=e.top,e.isDie=!1,e.isJump=!1,e.mycanvas=p.element.mycanvas,e.badflowerSpriteAnimatorUp=new w.UpSpriteAnimator(null,e),e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||(this.fpsNum=e,this.badflowerSpriteAnimatorUp.execute(),this.update(t,i,e)),this.paint(t)}},{key:"up",value:function(t){this.initialTop=this.top-p.WH.wall.height,this.velocityY=t,this.badflowerSpriteAnimatorUp.start()}},{key:"shootDie",value:function(){this.isDie||(this.isDie=!0,l.lib.removeByValue(drawSpriteList.arrayOthersA,"id",this.id),l.lib.removeByValue(u.createFactory.arrayTotalProgress,"id",this.id),m.audioControl.audioPlay(gameSourceObj.audioList.collision,m.gameAudio.monsterdie),this.visible=!1)}}]),i}(S),D=function(t){function i(t){o(this,i),t.name=t.name||"mushroom";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.mushroom),[new c.behaviorList.SpriteLeftToRight])),n=e;return e.width=t.width||p.WH.mushroom.width,e.height=t.height||p.WH.mushroom.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-p.gameConfig.roadHeight-t.physicaltop,e.id=t.id||0,e.left=t.left||0,e.initvelocityX=0,e.positionmile=t.positionmile||0,e.GRAVITY_FORCE=p.publicConfig.GRAVITY_FORCE,e.initialTop=e.top,e.isJump=!1,e.mycanvas=p.element.mycanvas,e.mushroomSpriteAnimatorUp=new w.UpSpriteAnimator(n.move.bind(n,-50),e),e.mushroomSpriteAnimatorJump=new w.CharacterSpriteAnimator(SpriteAnimatorEndCallbackList.marioJumpend,e),e.mushroomSpriteAnimatorMove=new w.MoveSpriteAnimator(SpriteAnimatorEndCallbackList.marioJumpend,e),e.isDie=!1,e.upover=!1,e.translateLeft=0,e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){this.fpsNum=e,gameControl.gamePause||(this.mushroomSpriteAnimatorUp.execute(),this.mushroomSpriteAnimatorJump.execute(),this.mushroomSpriteAnimatorMove.execute(),this.update(t,i,e)),this.paint(t)}},{key:"up",value:function(t){this.initialTop=this.top-p.WH.wall.height,this.velocityY=t,this.mushroomSpriteAnimatorUp.start()}},{key:"fall",value:function(t){this.velocityY=-t,this.initialTop=p.element.mycanvasHeight-this.height-p.gameConfig.roadHeight,this.mushroomSpriteAnimatorJump.start()}},{key:"die",value:function(t){this.velocityY=-t,this.mushroomSpriteAnimatorJump.start()}},{key:"move",value:function(t){this.velocityX=t,this.initvelocityX=t,this.velocityY=0,this.mushroomSpriteAnimatorMove.start()}}]),i}(S),H=function(t){function i(t){o(this,i),t.name=t.name||"star";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.star),[new c.behaviorList.SpriteLeftToRight]));return e.width=t.width||p.WH.star.width,e.height=t.height||p.WH.star.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-p.gameConfig.roadHeight-t.physicaltop,e.id=t.id||0,e.left=t.left||0,e.positionmile=t.positionmile||0,e.translateLeft=0,e.upColliding=null,e.GRAVITY_FORCE=p.publicConfig.GRAVITY_FORCE,e.initialTop=e.top,e.isDie=!1,e.isJump=!1,e.jumpPainter=new C(f.default.imageList.star),e.mycanvas=p.element.mycanvas,e.upover=!1,e.initvelocityX=0,e.starSpriteAnimatorUp=new w.CharacterSpriteAnimator(t.jumpEndCallback.bind(null,e),e),e.starSpriteAnimatorMove=new w.MoveSpriteAnimator(null,e),e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||(this.fpsNum=60,this.starSpriteAnimatorUp.execute(),this.starSpriteAnimatorMove.execute(),this.top<this.initialTop-p.WH.wall.height&&(this.upover=!0),this.update(t,i,e)),this.paint(t)}},{key:"up",value:function(t){this.velocityY=-t,this.starSpriteAnimatorUp.start()}},{key:"move",value:function(t){this.velocityX=t,this.initvelocityX=t,this.starSpriteAnimatorMove.start()}},{key:"fall",value:function(t){this.initialTop=this.top-p.WH.wall.height}},{key:"die",value:function(t){console.log("星星掉洞里了")}}]),i}(S),x=function(t){function i(t){o(this,i),t.name=t.name||"bullet";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.bullet),[new c.behaviorList.SpriteLeftToRight]));return e.width=t.width||p.WH.bullet.width,e.height=t.height||p.WH.bullet.height,e.top=t.top||0,e.isDie=!1,e.id=t.id||0,e.left=t.left||0,e.initvelocityX=0,e.translateLeft=0,e.positionmile=t.positionmile||0,e.roleType="bullet",e.GRAVITY_FORCE=p.publicConfig.GRAVITY_FORCE,e.initialTop=e.top,e.isJump=!1,e.mycanvas=p.element.mycanvas,e.bulletSpriteAnimatorJump=new w.BulletJumpSpriteAnimator(t.jumpEndCallback,e),e.marioSpriteAnimatorJump=new w.CharacterSpriteAnimator(SpriteAnimatorEndCallbackList.marioJumpend,e),e.RV=480,e.rotate=0,e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||(this.fpsNum=e,this.bulletSpriteAnimatorJump.execute(),this.marioSpriteAnimatorJump.execute(),this.update(t,i,e),t.save(),t.translate(this.left+this.width/2,this.top+this.height/2),this.rotate+=this.RV/e,t.rotate(this.rotate*Math.PI/180)),t.drawImage(this.painter.image,-this.width/2,-this.height/2,this.width,this.height),gameControl.gamePause||t.restore()}},{key:"jump",value:function(t){this.initvelocityX=t,this.velocityX=t,this.velocityY=0,this.initvelocityX>0?this.RV=-p.bulletConfig.RV:this.RV=p.bulletConfig.RV,this.initialTop=p.element.mycanvasHeight-this.height-p.gameConfig.roadHeight,this.bulletSpriteAnimatorJump.start()}},{key:"die",value:function(t){console.log("子弹掉洞里了")}}]),i}(S),E=function(t){function i(t){o(this,i),t.name=t.name||"pipe";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.pipe),[new c.behaviorList.SpriteLeftToRight]));return e.width=t.width||p.WH.pipe.width,e.height=t.height||p.WH.pipe.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-e.physicaltop,e.left=t.left||0,e.positionmile=t.positionmile||0,e.roleType="pipe",e.id=t.id||0,e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||this.update(t,i,e),this.paint(t)}}]),i}(S),F=function(t){function i(t){o(this,i),t.name=t.name||"final";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.final),[new c.behaviorList.SpriteLeftToRight]));return e.width=t.width||p.WH.final.width,e.height=t.height||p.WH.final.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-e.physicaltop,e.left=t.left||0,e.positionmile=t.positionmile||0,e.roleType="final",e.id=t.id||0,e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||this.update(t,i,e),this.paint(t)}}]),i}(S),W=function(t){function i(t){o(this,i),t.name=t.name||"flag";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.flag),[new c.behaviorList.SpriteLeftToRight]));return e.width=t.width||p.WH.flag.width,e.height=t.height||p.WH.flag.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-e.physicaltop,e.left=t.left||0,e.positionmile=t.positionmile||0,e.roleType="flag",e.id=t.id||0,e.velocityY=0,e.flowerSpriteAnimatorUp=new w.DownSpriteAnimator(function(){t.callback()},e),e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){this.fpsNum=e,this.flowerSpriteAnimatorUp.execute(),this.update(t,i,e),this.paint(t)}},{key:"down",value:function(){this.initialTop=p.element.mycanvasHeight-50,this.velocityY=80,m.audioControl.audioPlay(gameSourceObj.audioList.music,m.gameAudio.downflag),this.flowerSpriteAnimatorUp.start()}}]),i}(S),G=function(t){function i(t){o(this,i),t.name=t.name||"tower";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.tower),[new c.behaviorList.SpriteLeftToRight]));return e.width=t.width||p.WH.tower.width,e.height=t.height||p.WH.tower.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-e.physicaltop,e.left=t.left||0,e.positionmile=t.positionmile||0,e.roleType="tower",e.id=t.id||0,e.isReverse=t.isReverse,e.mycanvas=p.element.mycanvas,e.painter=new v(f.default.imageList.tower),e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||this.update(t,i,e),this.paint(t)}}]),i}(S),B=function(t){function i(t){o(this,i),t.name=t.name||"hole";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.hole),[new c.behaviorList.SpriteLeftToRight]));return e.width=t.width||p.WH.hole.width,e.height=t.height||p.WH.hole.height,e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-e.physicaltop,e.left=t.left||0,e.positionmile=t.positionmile||0,e.roleType="hole",e.id=t.id||0,e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||this.update(t,i,e),this.paint(t)}}]),i}(S),V=function(t){function i(t){o(this,i),t.name=t.name||"brick";var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.wall),[new c.behaviorList.SpriteLeftToRight]));return e.physicaltop=t.physicaltop||0,e.top=p.element.mycanvasHeight-e.height-p.gameConfig.roadHeight-t.physicaltop,e.id=t.id||0,e.left=t.left||0,e.positionmile=t.positionmile||0,e.roleType="Brick",e.status=t.status||"leftup",e.imgwidth=p.wallConfig[e.status+"Sprite"].width,e.imgheight=p.wallConfig[e.status+"Sprite"].height,e.imgleft=p.wallConfig[e.status+"Sprite"].left,e.imgtop=p.wallConfig[e.status+"Sprite"].top,e.width=e.imgwidth,e.height=e.imgheight,e.translateLeft=0,e.GRAVITY_FORCE=p.publicConfig.GRAVITY_FORCE,e.initialTop=e.top,e.isJump=!1,e.mycanvas=p.element.mycanvas,e.BrickSpriteAnimatorUp=new w.BrikeSpriteAnimator(t.jumpEndCallback,e),e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||(this.fpsNum=e,this.BrickSpriteAnimatorUp.execute(),this.update(t,i,e)),this.paint(t)}},{key:"up",value:function(){switch(this.initialTop=this.mycanvas.height,this.status){case"leftup":this.velocityY=-350,this.velocityX=70;break;case"leftdown":this.velocityY=-200,this.velocityX=70;break;case"rightup":this.velocityY=-350,this.velocityX=-70;break;case"rightdown":this.velocityY=-200,this.velocityX=-70}this.BrickSpriteAnimatorUp.start()}}]),i}(S),N=function(t){function i(t){o(this,i);var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.name,new C(f.default.imageList.BG),[new c.behaviorList.moveLeftToRight]));return e.width=t.width,e.height=t.height,e.top=t.top,e.left=t.left||0,e}return n(i,t),s(i,[{key:"draw",value:function(t,i,e){gameControl.gamePause||this.update(t,i,e);var o=this.left;o=this.velocityX>0?o<p.element.mycanvasWidth?o:0:o>-p.element.mycanvasWidth?o:0,this.left=o,this.paint(t),this.left=o-this.width,this.paint(t),this.left=o+this.width,this.paint(t),this.left=o}}]),i}(S);i.CharacterImagePainter=v,i.CharacterRunSpriteSheetPainter=y,i.CharacterRiseSpriteSheetPainter=b,i.SceneSprite=S,i.SceneImagePainter=C,i.Mario=L,i.Monster=T,i.Tortoise=A,i.Shell=_,i.Life=j,i.Over=O,i.Wall=P,i.Money=M,i.Flower=k,i.BadFlower=R,i.Mushroom=D,i.Star=H,i.Bullet=x,i.Pipe=E,i.Final=F,i.Flag=W,i.Tower=G,i.Hole=B,i.Brick=V,i.BG=N},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o={imageList:{BG:"./images/background2.png",wall:"./images/wall/wall.png",flower:"./images/flower/4.png",badflower:"./images/badflower/img.png",mushroom:"./images/mushroom/4.png",pipe:"./images/pipe.png",money:"./images/money.png",star:"./images/star.png",bullet:"./images/fire/fireL/0.png",hole:"./images/hole.png",tower:"./images/tower.png",monster:"./images/monster/1/img.png",monsterDie:"./images/monster/1/dead.png",tortoise:"./images/tortoise/img.png",shell:"./images/tortoise/roll/img.png",life:"./images/life/img.png",gameOver:"./images/over.png",gameSuccess:"./images/end.png",flag:"./images/flag.png",final:"./images/final.png",mario:{commonMairo:{run:"./images/mario/smallmario/marioR/spritesrun.png",jump:"./images/mario/smallmario/marioR/jump.png",stand:"./images/mario/smallmario/marioR/stand.png",laqi:"./images/winS.png"},fireMairo:{run:"./images/mario/smallmario/marioR/spritesrun2.png",jump:"./images/mario/smallmario/marioR/jump2.png",laqi:"./images/winS2.png",stand:"./images/mario/smallmario/marioR/stand2.png"},invinciblefireMairo:{run:"./images/mario/smallmario/marioR/spritesrun3.png",jump:"./images/mario/smallmario/marioR/jump3.png",laqi:"./images/winS3.png",stand:"./images/mario/smallmario/marioR/stand3.png"}}},audioList:{GameOver:"./sounds/mario/GameOver.mp3",BGM:"./sounds/mario/bag.mp3",gamesuccess:"./sounds/mario/gamesuccess.mp3",WD:"./sounds/mario/wudi.mp3",jumpAll:"./sounds/mario/jumpAll.mp3",collision:"./sounds/mario/mariocollision.mp3",die:"./sounds/mario/die.mp3",music:"./sounds/mario/music2.mp3"}};i.default=o},function(t,i,e){"use strict";function o(){var t=navigator.userAgent.toLowerCase(),i="ipad"==t.match(/ipad/i),e="iphone os"==t.match(/iphone os/i),o="midp"==t.match(/midp/i),a="rv:1.2.3.4"==t.match(/rv:1.2.3.4/i),n="ucweb"==t.match(/ucweb/i),s="android"==t.match(/android/i),r="windows ce"==t.match(/windows ce/i),l="windows mobile"==t.match(/windows mobile/i);return!!(i||e||o||a||n||s||r||l)}Object.defineProperty(i,"__esModule",{value:!0}),i.judgeMobile=o},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o={radius:45,right:{x:565,y:250},left:{x:55,y:230}};CanvasRenderingContext2D.prototype.roundRect=function(t,i,e,o,a){return e<2*a&&(a=e/2),o<2*a&&(a=o/2),this.beginPath(),this.moveTo(t+a,i),this.arcTo(t+e,i,t+e,i+o,a),this.arcTo(t+e,i+o,t,i+o,a),this.arcTo(t,i+o,t,i,a),this.arcTo(t,i,t+e,i,a),this.closePath(),this};var a={RIGHT:1,LEFT:2,ARROW_MARGIN:15,BALL_RADIUS:1.5,LEDGE_LEFT:15,LEDGE_TOP:9,LEDGE_WIDTH:4.4,LEDGE_HEIGHT:1.2,ANIMATION_DURATION:20,THRUSTER_FILL_STYLE:"rgba(100,140,230,0.8)",THRUSTER_FIRING_FILL_STYLE:"rgba(255,255,0,0.8)",arrowWidth:120,arrowHeight:65,lastTime:0,arrowRadius:25,press:{down:{backgroundColor:"rgba(220, 75, 63, 0.5)",textColor:"rgba(247, 20, 20, 0.78)"},up:{backgroundColor:"rgba(100, 140, 230, 0.5)",textColor:"rgba(0, 182, 255, 0.78)"}},btnArr:{Y:{position:{x:o.right.x,y:o.right.y-o.radius}},A:{position:{x:o.right.x,y:o.right.y+o.radius}},X:{position:{x:o.right.x-o.radius,y:o.right.y}},B:{position:{x:o.right.x+o.radius,y:o.right.y}}},arrowArr:{left:{isPress:!1,position:{x:102,y:90}},right:{isPress:!1,position:{x:102,y:155}},X:{isPress:!1,position:{x:112,y:522}},Y:{isPress:!1,position:{x:158,y:566}},B:{isPress:!1,position:{x:112,y:612}},A:{isPress:!1,position:{x:68,y:566}}},pause:{isPress:!1,position:{x:80,y:330}},juadegeP:function(t,i,e){return Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)<Math.pow(e,2)},juadegePause:function(t,i,e){return Math.pow(t.x-i.x+7,2)+Math.pow(t.y-i.y+12,2)<Math.pow(e,2)},draw:function(){this.context.clearRect(0,0,this.canvasWidht,this.canvasHeight),this.context.save(),this.context.shadowColor="rgba(0, 0, 0, 0.8)",this.context.shadowOffsetX=2,this.context.shadowOffsetY=2,this.context.shadowBlur=2,this.drawTwoArcs(),this.context.beginPath(),this.context.fillStyle=this.pause.isPress?this.THRUSTER_FIRING_FILL_STYLE:this.THRUSTER_FILL_STYLE,this.context.roundRect(this.pause.position.y-12,this.canvasHeight-this.pause.position.x-7,this.arrowRadius,this.arrowRadius/2,4),this.context.fill(),this.paintThrusters(),this.context.restore()},paintThrusters:function(){var t=this;t.context.save(),["left","right"].forEach(function(i){t.context.save(),t.context.fillStyle=t.arrowArr[i].isPress?t.THRUSTER_FIRING_FILL_STYLE:t.THRUSTER_FILL_STYLE,"left"==i&&t.paintLeftArrow(t.context),"right"==i&&t.paintRightArrow(t.context),t.context.restore()})},paintLeftArrow:function(t){var i=this;i.context.save(),i.context.translate(o.left.x,o.left.y),i.paintArrow(i.context),i.context.restore()},paintRightArrow:function(t){var i=this;i.context.save(),i.context.translate(o.left.x,o.left.y),i.context.translate(i.arrowWidth+i.ARROW_MARGIN,0),i.context.scale(-1,1),i.paintArrow(i.context),i.context.restore()},paintArrow:function(t){this.context.beginPath();var i=this.arrowWidth,e=this.ARROW_MARGIN,o=this.arrowHeight;this.context.moveTo(i/2-e/2,e/2),this.context.lineTo(i/2-e/2,o-e),this.context.quadraticCurveTo(i/2-e/2,o-e/2,i/2-e,o-e/2),this.context.lineTo(e,o/2+e/2),this.context.quadraticCurveTo(e-3,o/2,e,o/2-e/2),this.context.lineTo(i/2-e,e/2),this.context.quadraticCurveTo(i/2-e,e/2,i/2-e/2,e/2),this.context.fill(),this.context.stroke()},drawTwoArcs:function(){var t=this,i=Object.keys(t.btnArr);t.context.font="30px Lucida Sans",t.context.textAlign="center",i.forEach(function(i){var e=t.btnArr[i],o=t.arrowArr[i],a=o.isPress?t.press.down:t.press.up;t.context.save(),t.context.fillStyle=a.backgroundColor,t.context.strokeStyle=t.context.fillStyle,t.context.beginPath(),t.context.arc(e.position.x,e.position.y,t.arrowRadius,0,2*Math.PI,!1),t.context.fill(),t.context.stroke(),t.context.restore(),t.context.save(),t.context.fillStyle=a.textColor,t.context.shadowColor=void 0,t.context.shadowOffsetX=0,t.context.shadowOffsetY=0,t.context.fillText(i,e.position.x,e.position.y+10),t.context.restore()})},drawPressDown:function(t){var i=this,e=Object.keys(i.arrowArr);e.forEach(function(t){i.arrowArr[t].isPress=!1});for(var o=t.length,a=0;a<o;a++){var n=t[a],s=i.windowToCanvas(n.pageX,n.pageY);i.arrowRadius,i.arrowArr.left.position.y,this.canvasHeight,i.arrowRadius,i.arrowArr.left.position.x;e.forEach(function(t){i.juadegeP(s,i.arrowArr[t].position,i.arrowRadius)&&(i.arrowArr[t].isPress=!0)}),i.juadegeP(s,i.pause.position,i.arrowRadius)&&(i.pause.isPress=!i.pause.isPress)}},windowToCanvas:function(t,i){var e=this.thrustersCanvas.getBoundingClientRect(),o=this;return{y:(i-e.left)*(o.canvasWidht/e.height),x:(t-e.top)*(o.canvasHeight/e.width)}},init:function(){var t=this;this.thrustersCanvas=document.getElementById("controlCanvas"),this.context=document.getElementById("controlCanvas").getContext("2d"),this.result=document.querySelector(".result"),this.canvasWidht=document.getElementById("controlCanvas").width,this.canvasHeight=document.getElementById("controlCanvas").height,t.draw()}};i.controler=a},function(t,i,e){"use strict";var o=e(9);e(10),e(11);var a=e(12),n=e(13),s=e(0),r=e(3),l=e(1),h=e(2),u=e(21),p=e(5),c=function(t){return t&&t.__esModule?t:{default:t}}(p),m=e(4),d=e(6);e(22);var f=e(7);window.gameControl=new o.Game("game",s.element.mycanvas),gameControl.speed=1;var g=(0,d.judgeMobile)();g&&(document.getElementsByTagName("body")[0].style.opacity=1);var w={sourceNum:0,currentNum:0,progressbar:new a.COREHTML5.Progressbar(s.element.progressDiv,"rgba(0,0,0,0.5)",100,130,250),loadedCallback:function(){var t=this.currentNum/this.sourceNum*100;this.progressbar.draw(t),this.currentNum==this.sourceNum&&this.progressOver()},progressOver:function(){s.element.mycanvas.style.display="block",s.element.progressDiv.style.display="none",s.element.tipDiv.style.display="block",s.element.progressBox.style.display="none",r.createFactory.init(),r.createFactory.insertDrawSpriteList(0,drawSpriteList.arrayOthersA),gameControl.start(),r.progressObj.countDownStart(),h.audioControl.BGMPlay(gameSourceObj.audioList.BGM),h.audioControl.timeupdateAddEventListener(gameSourceObj.audioList.jumpAll),h.audioControl.timeupdateAddEventListener(gameSourceObj.audioList.collision),h.audioControl.timeupdateAddEventListener(gameSourceObj.audioList.music),game.init()}};window.gameSourceObj=l.lib.convertToObject(c.default,w),window.game={lastKeyListenerTime:0,init:function(){var t=this;u.clipObj.init(function(){console.log("游戏开始"),gameControl.gamePause=!1},function(){if(drawSpriteList.mario.lifeNum>0){var i=r.progressObj.mileageNum>64.38?64.38:0;t.reset(i)}else t.over();drawSpriteList.isSuccess&&t.success()}),this.bindEvent()},mapKey:{left:!1,right:!1,s:!1,w:!1,d:!1,space:!1},over:function(){h.audioControl.audioPlay(gameSourceObj.audioList.GameOver,h.gameAudio.GameOver),h.audioControl.BGMPause(gameSourceObj.audioList.BGM),drawSpriteList.gameOver.push(new m.Over({name:"Over"}))},success:function(){var t=new m.Over({name:"Over"});t.painter.image.src=c.default.imageList.gameSuccess,drawSpriteList.gameOver.push(t)},reset:function(t){console.log("reset"),r.progressObj.totaltime=300,r.progressObj.countDownWatch.reset(),r.progressObj.countDownWatch.start(),r.progressObj.mileageNum=t,r.progressObj.createSpriteMileNum=t*s.gameConfig.objectSpeedRate,drawSpriteList.arrayOthersA=[],r.createFactory.arrayTotalProgress.forEach(function(t){t.isMonster&&(t.isAdd=!1)}),drawSpriteList.createAnimationSpriteList=[],r.createFactory.insertDrawSpriteList(0,drawSpriteList.arrayOthersA),drawSpriteList.mario.reset(),drawSpriteList.statusArr.life.minuteLife(drawSpriteList.mario.lifeNum)},setScreenPress:function(t,i,e){var o=this;t.right=i.right.isPress,t.left=i.left.isPress,t.s=i.A.isPress,t.w=i.X.isPress,t.d=i.B.isPress,t.e=i.Y.isPress,t.p=e.isPress,o.activeEventCallback()},bindEvent:function(){this.reset(0);var t=this;if(setInterval(function(){r.createFactory.insertDrawSpriteList(0,drawSpriteList.arrayOthersA)},1e3),g)var i=!0,e=null,o=setInterval(function(){t.thrustersCanvas=document.getElementById("controlCanvas"),t.thrustersCanvas&&(clearInterval(o),console.log("绑定手机事件"),t.thrustersCanvas.addEventListener("touchstart",function(i){f.controler.result.innerHTML=i.targetTouches.length,i.preventDefault(),f.controler.drawPressDown(i.targetTouches),f.controler.draw(),t.setScreenPress(t.mapKey,f.controler.arrowArr,f.controler.pause)}),t.thrustersCanvas.addEventListener("touchend",function(o){f.controler.result.innerHTML=o.targetTouches.length,o.preventDefault(),f.controler.drawPressDown(o.targetTouches),f.controler.draw(),t.setScreenPress(t.mapKey,f.controler.arrowArr,f.controler.pause),i=!1,e&&clearTimeout(e)}),t.thrustersCanvas.addEventListener("touchmove",function(o){o.preventDefault(),i&&(e=setTimeout(function(){t.drawPressDown(o.targetTouches),t.draw(),t.setScreenPress(t.mapKey,f.controler.arrowArr,f.controler.pause),i=!0},100)),i=!1}))},1e3);gameControl.addKeyListener({key:"p",listener:function(){var t=!0;return function(i){1==i&&t?(4==drawSpriteList.mario.status?gameSourceObj.audioList.WD.paused?gameSourceObj.audioList.WD.play():gameSourceObj.audioList.WD.pause():gameSourceObj.audioList.BGM.paused?h.audioControl.BGMPlay(gameSourceObj.audioList.BGM):h.audioControl.BGMPause(gameSourceObj.audioList.BGM),gameControl.togglePaused(),r.progressObj.countDownWatch.isRunning()?r.progressObj.countDownPause():r.progressObj.countDownStart(),t=!1):0==i&&(t=!0)}}()}),gameControl.addKeyListener({key:"s",listener:function(i){gameControl.paused||(t.mapKey.s=1==i,t.activeEventCallback())}}),gameControl.addKeyListener({key:"w",listener:function(i){gameControl.paused||(t.mapKey.w=1==i,t.activeEventCallback())}}),gameControl.addKeyListener({key:"d",listener:function(i){gameControl.paused||(1==i?t.mapKey.d=!0:(t.mapKey.d=!1,t.advance=0),t.activeEventCallback())}}),gameControl.addKeyListener({key:"right",listener:function(i){t.mapKey.right=1==i,t.activeEventCallback()}}),gameControl.addKeyListener({key:"left",listener:function(i){t.mapKey.left=1==i,t.activeEventCallback()}})},activeEventCallback:function(){var t=Date.now(),i=this.mapKey.s||this.mapKey.w,e=this.mapKey.left&&!this.mapKey.right||!this.mapKey.left&&this.mapKey.right;if(e){if(r.createFactory.insertDrawSpriteList(0,drawSpriteList.arrayOthersA),1==gameControl.gamePause)return;s.gameConfig.setSpeedDefault(),this.mapKey.left&&!this.mapKey.right?(drawSpriteList.mario.rColliding&&s.gameConfig.setSpeedZero(),this.setDirection(-1),drawSpriteList.mario.isReverse=!1):(drawSpriteList.mario.lColliding&&s.gameConfig.setSpeedZero(),drawSpriteList.mario.isReverse=!0,this.setDirection(1))}else this.setDirection(0);if(i){if(1==gameControl.gamePause)return;if(drawSpriteList.mario.isJump)drawSpriteList.mario.painter=drawSpriteList.mario.painters.jump,drawSpriteList.mario.behaviors=[];else{var o=this.mapKey.s?s.marioGameConfig.smallJumpV:s.marioGameConfig.bigJumpV;drawSpriteList.mario.jump(o)}}else if(e){if(1==gameControl.gamePause)return;drawSpriteList.mario.isJump?(drawSpriteList.mario.painter=drawSpriteList.mario.painters.jump,drawSpriteList.mario.behaviors=[]):(drawSpriteList.mario.painter=drawSpriteList.mario.painters.run,drawSpriteList.mario.behaviors=[drawSpriteList.mario.behaviorStatus.runInPlace])}else{if(1==gameControl.gamePause)return;drawSpriteList.mario.isJump?drawSpriteList.mario.painter=drawSpriteList.mario.painters.jump:drawSpriteList.mario.painter=drawSpriteList.mario.painters.stand,drawSpriteList.mario.behaviors=[]}this.mapKey.d&&(4==drawSpriteList.mario.status&&3==drawSpriteList.mario.originalStatus||3==drawSpriteList.mario.status)&&t-this.advance>300&&(drawSpriteList.mario.isReverse?r.createFactory.createBullet(r.progressObj.createSpriteMileNum+drawSpriteList.mario.left+drawSpriteList.mario.width,drawSpriteList.mario.top+drawSpriteList.mario.height/3,drawSpriteList.mario.isReverse):r.createFactory.createBullet(r.progressObj.createSpriteMileNum+drawSpriteList.mario.left,drawSpriteList.mario.top+drawSpriteList.mario.height/3,drawSpriteList.mario.isReverse),this.advance=t)},advance:0,setDirection:function(t){switch(t){case 0:drawSpriteList.goDirection(0);break;case 1:drawSpriteList.goDirection(-1);break;case-1:drawSpriteList.goDirection(1)}}},window.SpriteAnimatorEndCallbackList={marioJumpend:function(t){t.isDie&&(t.lifeNum>0?(console.log("暂停"),gameControl.gamePause=!0,u.clipObj.startDraw()):u.clipObj.startDraw()),t.isJump=!1,t.startVelocityY=0,t.velocityY=0,t.isJump=!1,game.activeEventCallback()},moneyupend:function(t){l.lib.removeByValue(drawSpriteList.createSpriteList,"id",t.id),t=null},brickupend:function(t){l.lib.removeByValue(drawSpriteList.createBrickSpriteList,"id",t.id),t=null},monsterJumpend:function(t){1==t.isDie&&(l.lib.removeByValue(drawSpriteList.createAnimationSpriteList,"id",t.id),t=null)}},window.drawSpriteList={isSuccess:!1,success:function(){this.mario.intoTower(),console.log("游戏胜利")},bg:new m.BG({name:"BG",width:s.element.mycanvasWidth,height:s.element.mycanvasHeight,top:0,left:0}),mario:new m.Mario({name:"mario",isReverse:!0,success:function(){u.clipObj.startDraw()}}),progressObj:r.progressObj,statusArr:{life:new m.Life({name:"life"})},arrayOthersA:[],gameOver:[],createSpriteList:[],createAnimationSpriteList:[],createBrickSpriteList:[],createBulletSpriteList:[],goDirection:function(t){this.bg.velocityX=s.gameConfig.skySpeed*t,this.progressObj.velocityX=s.gameConfig.progressObjSpeed*t,this.arrayOthersA.forEach(function(i){i.velocityX=s.gameConfig.objectSpeed*t}),this.createSpriteList.forEach(function(i){i.velocityX=s.gameConfig.objectSpeed*t}),this.createAnimationSpriteList.forEach(function(i){i.velocityX=i.initvelocityX+s.gameConfig.objectSpeed*t}),this.createBulletSpriteList.forEach(function(i){i.velocityX=i.initvelocityX+s.gameConfig.objectSpeed*t})},judgeCD:{config:{wall:{funcName:"judgeMWall"},money:{funcName:"judgeMM"},final:{funcName:"judgeMFianl",callback:function(){console.log(33),drawSpriteList.isSuccess=!0,gameControl.gamePause=!0}},flower:{funcName:"judgeMF"},star:{funcName:"judgeMS"},bullet:{funcName:"judgeBBarrier"},mushroom:{funcName:"judgeMMR"},hole:{funcName:"judgeMH"},monster:{funcName:"judgeMMonster"},tortoise:{funcName:"judgeMMonster"},shell:{funcName:"judgeMShell"},flag:{funcName:"judgeMflag"},moverBarrier:{callback:function(t){l.lib.removeByValue(drawSpriteList.createAnimationSpriteList,"id",t.id),h.audioControl.audioPlay(gameSourceObj.audioList.jumpAll,h.gameAudio.growup),t=null}},pipe:{funcName:"judgeMPipe"},tower:{funcName:"judgeMTower"},badflower:{funcName:"judegMBadFlower"}},cdfunc:function(){if(!drawSpriteList.isSuccess){var t=this;drawSpriteList.arrayOthersA;1==s.gameConfig.gamePause?s.gameConfig.setSpeedZero():s.gameConfig.setSpeedDefault(),drawSpriteList.arrayOthersA.forEach(function(i){var e=t.config[i.name].callback||function(){};n.CD[t.config[i.name].funcName](drawSpriteList.mario,i,e)}),drawSpriteList.createSpriteList.forEach(function(i){var e=t.config[i.name].callback||function(){};n.CD[t.config[i.name].funcName](drawSpriteList.mario,i,e)}),drawSpriteList.createBulletSpriteList.forEach(function(i){drawSpriteList.arrayOthersA.forEach(function(e){if("wall"==e.name||"pipe"==e.name){var o=t.config.bullet.callback||function(){};n.CD.judgeBBarrier(i,e,o)}"hole"==e.name&&n.CD.judgeBulletHole(i,e),"badflower"==e.name&&n.CD.judgeBulletBadflower(i,e)}),drawSpriteList.createAnimationSpriteList.forEach(function(e){if("monster"==e.name||"tortoise"==e.name||"shell"==e.name){var o=t.config.bullet.callback||function(){};n.CD.judgeBMonster(i,e,o)}})}),drawSpriteList.createAnimationSpriteList.forEach(function(i){var e=t.config[i.name].callback||function(){};n.CD[t.config[i.name].funcName](drawSpriteList.mario,i,e),(i.upover||"mushroom"!=i.name&&"star"!=i.name)&&("shell"==i.name&&drawSpriteList.createAnimationSpriteList.forEach(function(t){"monster"!=t.name&&"tortoise"!=t.name&&"shell"!=t.name||t!=i&&n.CD.judgeShellMover(i,t)}),drawSpriteList.arrayOthersA.forEach(function(t){"wall"!=t.name&&"pipe"!=t.name||n.CD.judgeMoverBarrier(i,t),"hole"==t.name&&n.CD.judgeMoverHole(i,t)}))}),drawSpriteList.createAnimationSpriteList.forEach(function(t,i,e){(t.left+t.width<0||t.left>s.element.mycanvasWidth)&&l.lib.removeByValue(e,"id",t.id)})}}}},gameControl.startAnimate=function(t){gameControl.context.save(),u.clipObj.draw(),drawSpriteList.bg.draw(gameControl.context,t,gameControl.fps.num),v.countDown(t),drawSpriteList.arrayOthersA.forEach(function(i){"hole"==i.name&&i.draw(gameControl.context,t,gameControl.fps.num)}),drawSpriteList.createSpriteList.forEach(function(i){i.draw(gameControl.context,t,gameControl.fps.num)});for(var i in drawSpriteList.statusArr)drawSpriteList.statusArr[i].draw(gameControl.context,t,gameControl.fps.num);drawSpriteList.createAnimationSpriteList.forEach(function(i){i.draw(gameControl.context,t,gameControl.fps.num)}),drawSpriteList.createBulletSpriteList.forEach(function(i){i.draw(gameControl.context,t,gameControl.fps.num)}),drawSpriteList.arrayOthersA.forEach(function(i){"hole"!=i.name&&i.draw(gameControl.context,t,gameControl.fps.num)}),drawSpriteList.mario.draw(gameControl.context,t,gameControl.fps.num),drawSpriteList.createBrickSpriteList.forEach(function(i){i.draw(gameControl.context,t,gameControl.fps.num)}),drawSpriteList.gameOver.forEach(function(i){i.draw(gameControl.context,t,gameControl.fps.num)}),drawSpriteList.judgeCD.cdfunc(),gameControl.context.restore()};var v={ctx:gameControl.context,countDown:function(){var t=((new Date).Format("yyyy-MM-dd hh:mm:ss.S").split(" "),s.element.mycanvas),i=t.getContext("2d");i.font="bold 14px arial",i.fillStyle="red",i.fillText((gameControl.fps.num>>0)+"fps",50,20),r.progressObj.mileageNumUpdate(gameControl.fps.num),r.progressObj.countDownNumUpdate(),i.fillText("行程:"+(r.progressObj.mileageNum/174*100>>0)+"m",400,20),i.fillText("倒计时:"+(r.progressObj.currentTime>>0)+"s",480,20)}}},function(t,i,e){"use strict";function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}(),n=function(){return+new Date};i.Game=function(){function t(i,e){o(this,t),this.speed=1,this.context=e.getContext("2d"),this.gameName=i,this.sprites=[],this.keyListeners=[],this.gamePause=!1,this.startTime=0,this.lastTime=0,this.gameTime=0,this.fps={num:0,interval:1e3,lastTime:0},this.STARTING_FPS=60,this.paused=!1,this.startedPauseAt=0,this.PAUSE_TIMEOUT=100;var a=this;window.onkeypress=function(t){a.activeEvent(t,1)},window.onkeydown=function(t){a.activeEvent(t,1)},window.onkeyup=function(t){a.activeEvent(t,0)}}return a(t,[{key:"start",value:function(){var t=this;this.startTime=n(),window.requestNextAnimationFrame(function(i){t.animate.call(t,i)})}},{key:"animate",value:function(t){var i=this;this.paused?setTimeout(function(){window.requestNextAnimationFrame(function(t){i.animate.call(i,t)})},this.PAUSE_TIMEOUT):(this.tick(t),this.clearScreen(),this.startAnimate(t),this.lastTime=t,window.requestNextAnimationFrame(function(t){i.animate.call(i,t)}))}},{key:"clearScreen",value:function(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)}},{key:"tick",value:function(t){this.updateFrameRate(t),this.gameTime=n()-this.startTime}},{key:"updateFrameRate",value:function(t){0===this.lastTime?this.fps.num=this.STARTING_FPS:t-this.fps.lastTime>this.fps.interval&&(this.fps.num=1e3/(t-this.lastTime),this.fps.lastTime=t)}},{key:"paintUnderSprites",value:function(t){}},{key:"addKeyListener",value:function(t){this.keyListeners.push(t)}},{key:"findKeyListener",value:function(t){for(var i=void 0,e=0;e<this.keyListeners.length;e++){var o=this.keyListeners[e];o.key===t&&(i=o.listener)}return i}},{key:"activeEvent",value:function(t,i){var e=void 0,o=void 0;switch(t.keyCode){case 32:o="space";break;case 68:o="d";break;case 87:o="w";break;case 75:o="k";break;case 83:o="s";break;case 80:o="p";break;case 37:o="left";break;case 39:o="right";break;case 38:o="up";break;case 40:o="down"}(e=this.findKeyListener(o))&&e(i)}},{key:"togglePaused",value:function(){var t=n();this.paused=!this.paused,this.paused?(this.startedPauseAt=t,this.fps.lastTime=t):(this.startTime=this.startTime+t-this.startedPauseAt,this.lastTime=t)}},{key:"startAnimate",value:function(t){}}]),t}()},function(t,i,e){"use strict";window.requestNextAnimationFrame=function(){var t=void 0,i=void 0,e=navigator.userAgent,o=0,a={};return window.webkitRequestAnimationFrame&&(i=function(t){void 0===t&&(t=+new Date),a.callback(t)},t=window.webkitRequestAnimationFrame,window.webkitRequestAnimationFrame=function(e,o){a.callback=e,t(i,o)}),window.requestAnimationFrame&&(i=function(t){t=+new Date,a.callback(t)},t=window.requestAnimationFrame,window.requestAnimationFrame=function(e,o){a.callback=e,t(i,o)}),window.mozRequestAnimationFrame&&(o=e.indexOf("rv:"),-1!=e.indexOf("Gecko")&&"2.0"===e.substr(o+3,3)&&(window.mozRequestAnimationFrame=void 0)),window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,i){var e=void 0,o=void 0;window.setTimeout(function(){e=+new Date,t(e),o=+new Date,a.timeout=1e3/60-(o-e)},a.timeout)}}()},function(t,i,e){"use strict";Date.prototype.Format=function(t){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=o||{};o.Progressbar=function(t,i,e,o,a){this.domElement=document.createElement("div"),this.context=document.createElement("canvas").getContext("2d"),this.domElement.appendChild(this.context.canvas),t.appendChild(this.domElement);var n=t.offsetWidth,s=t.offsetHeight;return this.context.canvas.width=n,this.context.canvas.height=s,this.setProgressbarProperties(n,s),this.background.globalAlpha=.3,this.drawToBuffer(this.background,i,e,o,a),this.drawToBuffer(this.foreground,i,e,o,a),this.percentComplete=0,this},o.Progressbar.prototype={LEFT:0,TOP:0,setProgressbarProperties:function(t,i){this.w=t,this.h=i,this.cornerRadius=this.h/2,this.right=this.LEFT+this.w,this.bottom=this.TOP+this.h,this.background=document.createElement("canvas").getContext("2d"),this.foreground=document.createElement("canvas").getContext("2d"),this.background.canvas.width=t+i,this.background.canvas.height=i,this.foreground.canvas.width=t+i,this.foreground.canvas.height=i},draw:function(t){this.erase(),this.context.drawImage(this.background.canvas,0,0),t>0&&this.context.drawImage(this.foreground.canvas,0,0,this.foreground.canvas.width*(t/100),this.foreground.canvas.height,0,0,this.foreground.canvas.width*(t/100),this.foreground.canvas.height)},drawToBuffer:function(t,i,e,o,a){t.save(),t.fillStyle="rgb("+e+", "+o+", "+a+")",t.strokeStyle=i,t.beginPath(),t.moveTo(this.LEFT+this.cornerRadius,this.TOP),t.lineTo(this.right-this.cornerRadius,this.TOP),t.arc(this.right-this.cornerRadius,this.TOP+this.cornerRadius,this.cornerRadius,-Math.PI/2,Math.PI/2),t.lineTo(this.LEFT+this.cornerRadius,this.TOP+2*this.cornerRadius),t.arc(this.LEFT+this.cornerRadius,this.TOP+this.cornerRadius,this.cornerRadius,Math.PI/2,-Math.PI/2),t.fill(),t.shadowColor=void 0;var n=t.createLinearGradient(this.LEFT,this.TOP,this.LEFT,this.bottom);n.addColorStop(0,"rgba(255,255,255,0.4)"),n.addColorStop(.3,"rgba(255,255,255,0.7)"),n.addColorStop(.4,"rgba(255,255,255,0.5)"),n.addColorStop(1,"rgba(255,255,255,0.1)"),t.fillStyle=n,t.fill(),t.lineWidth=.4,t.stroke(),t.restore()},erase:function(){this.context.clearRect(this.LEFT,this.TOP,this.context.canvas.width,this.context.canvas.height)}},i.COREHTML5=o},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CD=void 0;var o=e(0),a=e(1),n=e(2),s=e(3),r=e(4);i.CD={CDFunc:{MoverOutCarrying:function(t,i){var e=t.upColliding,a=t.upColliding&&(t.left+t.width<e.left||e.left+e.width<t.left);t.upColliding&&!a||0==t.isDie&&(t.initialTop=o.element.mycanvasHeight-t.height-o.gameConfig.roadHeight),t.upColliding!=i||t.isJump||(t.fall(0),t.isJump=!0,t.upColliding=null)},MOutCarrying:function(t,i){var e=t.upColliding,a=t.upColliding&&(t.left+t.width<e.left||e.left+e.width<t.left);t.upColliding&&!a||t.isDie||(t.initialTop=o.element.mycanvasHeight-t.height-o.gameConfig.roadHeight),t.upColliding!=i||t.isJump||(t.jump(0),t.isJump=!0,t.upColliding=null),t.lColliding==i&&(t.lColliding=null),t.rColliding==i&&(t.rColliding=null)},MleftBarrier:function(t,i){t.left=i.left-t.width,o.gameConfig.setSpeedZero(),game.setDirection(0),t.lColliding=i},MleftFinal:function(t,i){t.left=i.left-t.width+10,o.gameConfig.setSpeedZero(),game.setDirection(0),t.lColliding=i},MrightBarrier:function(t,i){t.left=i.left+i.width,o.gameConfig.setSpeedZero(),game.setDirection(0),t.rColliding=i},MupBarrier:function(t,i){t.initialTop=i.top-t.height,t.upColliding=i},MdownWall:function(t,i,e){if(t.velocityY=-t.velocityY,t.top=i.top+i.height+1,!i.isJump)if(1==i.status){switch(i.up(60),i.contain){case 1:n.audioControl.audioPlay(gameSourceObj.audioList.collision,n.gameAudio.eatMoney),s.createFactory.createUpMoney(i.positionmile,i.physicaltop);break;case 2:case 3:n.audioControl.audioPlay(gameSourceObj.audioList.collision,n.gameAudio.flowerup),1==t.status||4==t.status&&1==t.originalStatus?s.createFactory.createUpMushroom(i.positionmile,i.physicaltop):s.createFactory.createUpFlower(i.positionmile,i.physicaltop);break;case 4:n.audioControl.audioPlay(gameSourceObj.audioList.collision,n.gameAudio.flowerup),s.createFactory.createStar(i.positionmile,i.physicaltop)}i.changeToAA()}else if(2==i.status)n.audioControl.audioPlay(gameSourceObj.audioList.collision,n.gameAudio.hitwall);else{if(1==i.contain&&0==i.status&&i.moneyCount>0)return n.audioControl.audioPlay(gameSourceObj.audioList.collision,n.gameAudio.eatMoney),s.createFactory.createUpMoney(i.positionmile,i.physicaltop),i.up(60),void(0==--i.moneyCount&&i.changeToAA());if(1==t.status)i.up(60),n.audioControl.audioPlay(gameSourceObj.audioList.collision,n.gameAudio.hitwall);else{i.visible=!1;var o=i.id,a=s.totalProgressSprite.wall;a.forEach(function(t){t.id==o&&(t.isVisible=!1)}),console.log(i.positionmile),s.createFactory.createBrick(i.positionmile,i.physicaltop),n.audioControl.audioPlay(gameSourceObj.audioList.music,n.gameAudio.wallbreak)}}},MoverleftBarrier:function(t,i){t.left=i.left-t.width-3,t.velocityX=-t.velocityX,t.initvelocityX=-t.initvelocityX,t.isReverse=!t.isReverse},MoverrightBarrier:function(t,i){t.left=i.left+t.width+3,t.velocityX=-t.velocityX,t.isReverse=!t.isReverse,t.initvelocityX=-t.initvelocityX},MoverupBarrier:function(t,i){t.initialTop=i.top-t.height,t.upColliding=i},BulletleftBarrier:function(t,i){a.lib.removeByValue(drawSpriteList.createBulletSpriteList,"id",t.id),n.audioControl.audioPlay(gameSourceObj.audioList.collision,n.gameAudio.hitwall),t=null},BulletrightBarrier:function(t,i){a.lib.removeByValue(drawSpriteList.createBulletSpriteList,"id",t.id),n.audioControl.audioPlay(gameSourceObj.audioList.collision,n.gameAudio.hitwall),t=null},MairoCollisionMonster:function(t,i){console.log("碰撞死亡"),t.collision=i,1==t.status&&t.height==o.WH.mario.smallstatus.height?(console.log("碰撞死亡222"),t.collisiondie()):(console.log("碰撞死亡111"),4==t.status?i.shootDie():drawSpriteList.mario.rise(o.WH.mario.smallstatus.height,1))},Colliding:function(t,i,e,o,a,n){var s=t.width+i.width,r=t.height+i.height,l=r/Math.sqrt(s*s+r*r),h=t.left+t.width/2-(i.left+i.width/2),u=t.top+t.height/2-(i.top+i.height/2),p=u/Math.sqrt(h*h+u*u);h>0?Math.abs(p)<l?o():p>0?a():n():Math.abs(p)<l?e():p>0?a():n()}},judgeMM:function(t,i,e){if(0!=i.visible){if(t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top)return!0;e(i),i.visible=!1;var o=i.id;s.totalProgressSprite.money.forEach(function(t){t.id==o&&(t.isVisible=!1)}),n.audioControl.audioPlay(gameSourceObj.audioList.collision,n.gameAudio.eatMoney)}},judgeMH:function(t,i,e){if(0!=i.visible){t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top||t.left-15>i.left&&i.left+i.width-15>t.left+t.width&&(t.die(),t.isJump=!0,t.upColliding=i)}},judgeMoverHole:function(t,i,e){if(0!=i.visible){if(t.top>=o.element.mycanvasHeight+200)return a.lib.removeByValue(drawSpriteList.createAnimationSpriteList,"id",t.id),void(t=null);t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top||t.left-15>i.left&&i.left+i.width-15>t.left+t.width&&(t.isDie||(t.isDie=!0,t.initialTop=o.element.mycanvasHeight+200,t.isJump||(t.die(0),console.log("luo"))),t.isJump=!0,t.upColliding=i)}},judgeMflag:function(t,i,e){},judegMBadFlower:function(t,i,e){if((0!=t.visible||1!=t.isDie)&&1!=i.isDie){var o=this;if(i.left+i.width<t.left||t.left+t.width<i.left||i.top+i.height<t.top||t.top+t.height<i.top)t.collision==i&&(console.log("取消collision"),t.collision=null);else{if(t.collision==i)return;var a=function(){o.CDFunc.MairoCollisionMonster(t,i)};t.isDie||i.isDie||o.CDFunc.Colliding(i,t,a,a,a,a)}}},judgeBulletBadflower:function(t,i){i.left+i.width<t.left||t.left+t.width<i.left||i.top+i.height<t.top||t.top+t.height<i.top||(a.lib.removeByValue(drawSpriteList.createBulletSpriteList,"id",t.id),i.shootDie(),t=null)},judgeBulletHole:function(t,i,e){if(0!=i.visible){if(t.top+t.width/3>=o.element.mycanvasHeight)return a.lib.removeByValue(drawSpriteList.createBulletSpriteList,"id",t.id),void(t=null);t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top||t.left-15>i.left&&i.left+i.width-15>t.left+t.width&&(t.isDie||(t.isDie=!0,t.initialTop=o.element.mycanvasHeight+200,t.isJump||(t.die(0),console.log("luo"))),t.isJump=!0,t.upColliding=i)}},judgeMMonster:function(t,i,e){if((0!=t.visible||1!=t.isDie)&&1!=i.isDie){var o=this;if(i.left+i.width<t.left||t.left+t.width<i.left||i.top+i.height<t.top||t.top+t.height<i.top)t.collision==i&&(console.log("取消collision"),t.collision=null);else{if(t.collision==i)return;var a=function(){console.log("leftfun"),o.CDFunc.MairoCollisionMonster(t,i)},n=function(){console.log("rightfun"),o.CDFunc.MairoCollisionMonster(t,i)},s=function(){console.log("upfun"),o.CDFunc.MairoCollisionMonster(t,i)},l=function(){if("monster"==i.name&&i.collisionDie(),"tortoise"==i.name){console.log("猜到乌龟了"),i.visible=!1,i.isDie=!0;var e=new r.Shell({left:i.left});t.initialTop=e.top-t.height,console.log("设置"+t.initialTop),t.upColliding=i,drawSpriteList.createAnimationSpriteList.push(e),SpriteAnimatorEndCallbackList.monsterJumpend(i)}"shell"==i.name&&console.log("猜到乌龟壳了")};t.isDie||i.isDie||o.CDFunc.Colliding(i,t,a,n,l,s)}}},judgeMShell:function(t,i,e){if(0!=t.visible||1!=t.isDie){var a=this;if(i.left+i.width<t.left||t.left+t.width<i.left||i.top+i.height<t.top||t.top+t.height<i.top)this.CDFunc.MOutCarrying(t,i),t.collision=null;else{if(t.collision==i)return;var n=function(){0==i.status?(t.left=i.left+i.width,i.shoot(o.gameConfig.shellSpeed)):a.CDFunc.MairoCollisionMonster(t,i)},s=function(){0==i.status?(t.left=i.left-t.width,i.shoot(-o.gameConfig.shellSpeed)):a.CDFunc.MairoCollisionMonster(t,i)},r=function(){a.CDFunc.MairoCollisionMonster(t,i)},l=function(){i.pause(),t.upColliding=i,t.initialTop=i.top-t.height};t.isDie||i.isDie||a.CDFunc.Colliding(i,t,n,s,l,r)}}},judgeShellMover:function(t,i){if(!i.isDie&&!t.isDie){var e=this;if(t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top)this.CDFunc.MoverOutCarrying(t,i);else if(0==t.status){var o=function(){e.CDFunc.MoverleftBarrier(i,t)},a=function(){e.CDFunc.MoverrightBarrier(i,t)},n=function(){e.CDFunc.MoverupBarrier(i,t)},s=function(){};e.CDFunc.Colliding(i,t,o,a,s,n)}else{var r=function(){i.shootDie()},l=function(){i.shootDie()},h=function(){i.shootDie()},u=function(){i.shootDie()};e.CDFunc.Colliding(t,i,r,l,u,h)}}},judgeBBarrier:function(t,i,e){if(0!=i.visible){var o=this;if(t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top)this.CDFunc.MoverOutCarrying(t,i);else{var a=function(){o.CDFunc.BulletleftBarrier(t,i)},n=function(){o.CDFunc.BulletrightBarrier(t,i)},s=function(){o.CDFunc.MoverupBarrier(t,i)},r=function(){};o.CDFunc.Colliding(t,i,a,n,r,s)}}},judgeBMonster:function(t,i,e){if(0!=i.visible){var o=this;if(t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top);else{var a=function(){o.CDFunc.BulletleftBarrier(t,i),i.shootDie()},n=function(){o.CDFunc.BulletrightBarrier(t,i),i.shootDie()},s=function(){o.CDFunc.BulletrightBarrier(t,i),i.shootDie()},r=function(){o.CDFunc.BulletrightBarrier(t,i),i.shootDie()};o.CDFunc.Colliding(t,i,a,n,r,s)}}},judgeMF:function(t,i,e){if(0!=i.visible)return t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top||(a.lib.removeByValue(drawSpriteList.createSpriteList,"id",i.id),n.audioControl.audioPlay(gameSourceObj.audioList.jumpAll,n.gameAudio.growup),drawSpriteList.mario.rise(o.WH.mario.bigstatus.height,3),i=null,void 0)},judgeMS:function(t,i,e){if(0!=i.visible)return t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top||(a.lib.removeByValue(drawSpriteList.createAnimationSpriteList,"id",i.id),drawSpriteList.mario.rise(drawSpriteList.mario.height,4),i=null,void 0)},judgeMMR:function(t,i,e){if(0!=i.visible)return t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top||(a.lib.removeByValue(drawSpriteList.createAnimationSpriteList,"id",i.id),drawSpriteList.mario.rise(o.WH.mario.bigstatus.height,2),i=null,void 0)},judgeMWall:function(t,i,e){if(0!=i.visible&&1!=t.isDie){var o=this;if(t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top)this.CDFunc.MOutCarrying(t,i);else{var a=function(){o.CDFunc.MleftBarrier(t,i)},n=function(){o.CDFunc.MrightBarrier(t,i)},s=function(){o.CDFunc.MupBarrier(t,i)},r=function(){o.CDFunc.MdownWall(t,i,e)};o.CDFunc.Colliding(t,i,a,n,r,s)}}},judgeMPipe:function(t,i,e){if(0!=i.visible&&1!=t.isDie){var o=this;if(t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top)this.CDFunc.MOutCarrying(t,i);else{var a=function(){o.CDFunc.MleftBarrier(t,i)},n=function(){o.CDFunc.MrightBarrier(t,i)},s=function(){o.CDFunc.MupBarrier(t,i)},r=function(){};o.CDFunc.Colliding(t,i,a,n,r,s)}}},judgeMFianl:function(t,i,e){if(0!=i.visible&&1!=t.isDie){var o=this;if(t.left+t.width-10<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top)this.CDFunc.MOutCarrying(t,i);else{var a=function(){o.CDFunc.MleftFinal(t,i)},n=function(){o.CDFunc.MleftFinal(t,i)},s=function(){o.CDFunc.MleftFinal(t,i)},r=function(){};drawSpriteList.arrayOthersA.forEach(function(t){"flag"==t.name&&t.down()}),console.log(11),t.laqi(),o.CDFunc.Colliding(t,i,a,n,r,s),t.left=i.left+7,e()}}},judgeMTower:function(t,i,e){if(0!=i.visible&&1!=t.isDie){var o=this;if(t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top)this.CDFunc.MOutCarrying(t,i);else{var a=function(){o.CDFunc.MleftBarrier(t,i)},n=function(){o.CDFunc.MrightBarrier(t,i)},s=function(){o.CDFunc.MupBarrier(t,i)},r=function(){};o.CDFunc.Colliding(t,i,a,n,r,s)}}},judgeMoverBarrier:function(t,i){if(0!=i.visible){var e=this;if(t.left+t.width<i.left||i.left+i.width<t.left||t.top+t.height<i.top||i.top+i.height<t.top)this.CDFunc.MoverOutCarrying(t,i);else{var o=function(){e.CDFunc.MoverleftBarrier(t,i)},a=function(){e.CDFunc.MoverrightBarrier(t,i)},n=function(){e.CDFunc.MoverupBarrier(t,i)},s=function(){};e.CDFunc.Colliding(t,i,o,a,s,n)}}}}},function(t,i,e){"use strict";function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}(),n=function(){function t(){o(this,t),this.startTime=0,this.running=!1,this.elapsed=void 0}return a(t,[{key:"start",value:function(){this.startTime=+new Date,this.elapsedTime=void 0,this.running=!0}},{key:"stop",value:function(){this.elapsed=+new Date-this.startTime,this.running=!1}},{key:"getElapsedTime",value:function(){return this.running?+new Date-this.startTime:this.elapsed}},{key:"isRunning",value:function(){return this.running}},{key:"reset",value:function(){this.elapsed=0}}]),t}();i.default=n},function(t,i,e){"use strict";function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}(),n=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],a=arguments[2];o(this,t),this.cells=i,this.spritesheet=new Image,this.spritesheet.src=e,this.cellIndex=0,this.mycanvas=a}return a(t,[{key:"advance",value:function(){this.cellIndex==this.cells.length-1?this.cellIndex=0:this.cellIndex++}},{key:"paint",value:function(t,i){var e=this.cells[this.cellIndex];i.drawImage(this.spritesheet.cell.left,e.top,e.width,e.heightsprite.left,t.top,e.width,e.height)}}]),t}();i.SpriteSheetPainter=n},function(t,i,e){"use strict";function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}();i.Sprite=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];o(this,t),this.name=i,this.painter=e,this.behaviors=a,this.left=0,this.top=0,this.width=10,this.height=10,this.visible=!0,this.velocityX=0,this.velocityY=0,this.initialVelocity=0}return a(t,[{key:"paint",value:function(t){void 0!==this.painter&&this.visible&&this.painter.paint(this,t)}},{key:"update",value:function(t,i){for(var e=this.behaviors.length;e>0;--e)this.behaviors[e-1].execute(this,t,i)}}]),t}()},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.behaviorList=void 0;var o=e(1),a=e(3),n={moveLeftToRight:function(){this.behaviorName="moveLeftToRight",this.lastMove=0,this.fpsNum=60,this.execute=function(t,i,e,o){this.fpsNum=0==o?0:o||this.fpsNum,t.left+=t.velocityX/this.fpsNum,this.lastMove=e}},SpriteLeftToRight:function(){this.behaviorName="moveLeftToRight",this.lastMove=0,this.fpsNum=60,this.execute=function(t,i,e,o){var n=t.translateLeft||0;t.left=t.positionmile-a.progressObj.createSpriteMileNum-n}},runInPlace:function(t){var i={lastAdvance:0,PAGEFLIP_INTERVAL:30,behaviorName:"runInPlace"};o.lib.jQueryExtend(i,t),this.lastAdvance=i.lastAdvance,this.PAGEFLIP_INTERVAL=i.PAGEFLIP_INTERVAL,this.behaviorName=i.behaviorName,this.execute=function(t,i,e){e-this.lastAdvance>this.PAGEFLIP_INTERVAL&&(t.painter.advance(t),this.lastAdvance=e)}},upInPlace:function(t){var i={lastAdvance:0,PAGEFLIP_INTERVAL:30,behaviorName:"runInPlace"};o.lib.jQueryExtend(i,t),this.lastAdvance=i.lastAdvance,this.PAGEFLIP_INTERVAL=i.PAGEFLIP_INTERVAL,this.behaviorName=i.behaviorName,this.execute=function(t,i,e){e-this.lastAdvance>this.PAGEFLIP_INTERVAL&&(t.painter.advance(t),this.lastAdvance=e)}},jump:function(t){var i={lastAdvance:0,isJump:!1,behaviorName:"jump",jumpOverCallback:function(){},status:0};o.lib.jQueryExtend(i,t),this.lastAdvance=i.lastAdvance,this.behaviorName=i.behaviorName,this.fpsNum=60,this.status=i.status,this.jumpOverCallback=i.jumpOverCallback,this.execute=function(t,i,e,o){0!==this.lastAdvance&&(t.velocityY<t.startVelocityY?(this.fpsNum=0==o?0:o||this.fpsNum,t.velocityY=t.velocityY+t.GRAVITY_FORCE/this.fpsNum,t.top+=t.velocityY/this.fpsNum,t.top<t.initialTop?t.isJump=!0:(t.top=t.initialTop,t.isJump=!1,this.jumpOverCallback())):t.isJump=!1),this.lastAdvance=e}}};i.behaviorList=n},function(t,i,e){"use strict";function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}(),n=function(){function t(i){o(this,t),i&&(this.image=new Image,this.image.src=i)}return a(t,[{key:"paint",value:function(t,i){this.image&&i.drawImage(this.image,t.left,t.top,t.width,t.height)}}]),t}();i.ImagePainter=n},function(t,i,e){"use strict";function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function a(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function n(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}Object.defineProperty(i,"__esModule",{value:!0}),i.MairoSpriteAnimator=i.MoveSpriteAnimator=i.BrikeSpriteAnimator=i.RiseSpriteAnimator=i.BulletJumpSpriteAnimator=i.DownSpriteAnimator=i.UpSpriteAnimator=i.CharacterSpriteAnimator=void 0;var s=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}(),r=e(20),l=e(0),h=function(t){function i(t,e){o(this,i);var n=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,void 0,t));return t&&(n.elapsedCallback=t),n.sprite=e,n.isRunning=!1,n}return n(i,t),s(i,[{key:"end",value:function(t){t.animating=!1,this.elapsedCallback&&this.elapsedCallback(t)}},{key:"start",value:function(){this.isRunning=!0}},{key:"execute",value:function(){var t=this;t.isRunning&&(this.sprite.velocityY=this.sprite.velocityY+this.sprite.GRAVITY_FORCE/this.sprite.fpsNum,this.sprite.top+=this.sprite.velocityY/this.sprite.fpsNum,this.sprite.top<this.sprite.initialTop?this.sprite.isJump=!0:(this.sprite.top=this.sprite.initialTop,this.sprite.isJump=!1,t.isRunning=!1,t.end(this.sprite)))}}]),i}(r.SpriteAnimator),u=function(t){function i(t,e){return o(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e))}return n(i,t),s(i,[{key:"execute",value:function(){var t=this;t.isRunning&&(this.sprite.top-=this.sprite.velocityY/this.sprite.fpsNum,this.sprite.top>this.sprite.initialTop?this.sprite.isJump=!0:(this.sprite.upover=!0,this.sprite.top=this.sprite.initialTop,this.sprite.isJump=!1,t.isRunning=!1,t.end(this.sprite)))}}]),i}(h),p=function(t){function i(t,e){return o(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e))}return n(i,t),s(i,[{key:"execute",value:function(){var t=this;t.isRunning&&(this.sprite.top+=this.sprite.velocityY/this.sprite.fpsNum,this.sprite.top<this.sprite.initialTop?this.sprite.isJump=!0:(this.sprite.upover=!0,this.sprite.top=this.sprite.initialTop,this.sprite.isJump=!1,t.isRunning=!1,t.end(this.sprite)))}}]),i}(h),c=function(t){function i(t,e){return o(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e))}return n(i,t),s(i,[{key:"execute",value:function(){this.isRunning&&((this.sprite.left+this.sprite.width<0||this.sprite.left>this.sprite.mycanvas.width)&&lib.removeByValue(drawSpriteList.createBulletSpriteList,"id",this.sprite.id),this.sprite.velocityY=this.sprite.velocityY+2*this.sprite.GRAVITY_FORCE/this.sprite.fpsNum,this.sprite.translateLeft+=this.sprite.velocityX/this.sprite.fpsNum,this.sprite.top+=this.sprite.velocityY/this.sprite.fpsNum,this.sprite.top<this.sprite.initialTop?this.sprite.isJump=!0:(this.sprite.top=this.sprite.initialTop,this.sprite.velocityY=-200))}}]),i}(h),m=function(t){function i(t,e){return o(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e))}return n(i,t),s(i,[{key:"execute",value:function(){var t=this;if(t.isRunning){this.sprite.height+=this.sprite.risespeed/this.sprite.fpsNum;var i=l.WH.mario.bigstatus.width/l.WH.mario.bigstatus.height;if(this.sprite.width+=this.sprite.risespeed*i/this.sprite.fpsNum,this.sprite.top-=this.sprite.risespeed/this.sprite.fpsNum,this.sprite.left-=this.sprite.risespeed*i/this.sprite.fpsNum/2,this.sprite.risespeed>0&&this.sprite.height<this.sprite.initialHeight||this.sprite.risespeed<0&&this.sprite.height>this.sprite.initialHeight)this.sprite.isRising=!0;else{this.sprite.height=this.sprite.initialHeight;var e=l.WH.mario.bigstatus.width/l.WH.mario.bigstatus.height;this.sprite.width=this.sprite.initialHeight*e,this.sprite.isRising=!1,t.isRunning=!1,t.end(this.sprite)}}}}]),i}(h),d=function(t){function i(t,e){return o(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e))}return n(i,t),s(i,[{key:"execute",value:function(){var t=this;t.isRunning&&(this.sprite.velocityY=this.sprite.velocityY+2*this.sprite.GRAVITY_FORCE/this.sprite.fpsNum,this.sprite.translateLeft+=this.sprite.velocityX/this.sprite.fpsNum,this.sprite.top+=this.sprite.velocityY/this.sprite.fpsNum,this.sprite.top<this.sprite.initialTop?this.sprite.isJump=!0:(this.sprite.upover=!0,this.sprite.top=this.sprite.initialTop,this.sprite.isJump=!1,t.isRunning=!1,t.end(this.sprite)))}}]),i}(h),f=function(t){function i(t,e){return o(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e))}return n(i,t),s(i,[{key:"execute",value:function(){this.isRunning&&(this.sprite.translateLeft+=this.sprite.initvelocityX/this.sprite.fpsNum)}}]),i}(h),g=function(t){function i(t,e){return o(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e))}return n(i,t),s(i,[{key:"execute",value:function(){var t=this;t.isRunning&&(-this.sprite.translateLeft<l.element.mycanvasWidth-100?this.sprite.translateLeft+=this.sprite.initvelocityX/this.sprite.fpsNum:(t.isRunning=!1,this.sprite.painter=void 0,this.sprite.behaviors=[],this.elapsedCallback()))}}]),i}(h);i.CharacterSpriteAnimator=h,i.UpSpriteAnimator=u,i.DownSpriteAnimator=p,i.BulletJumpSpriteAnimator=c,i.RiseSpriteAnimator=m,i.BrikeSpriteAnimator=d,i.MoveSpriteAnimator=f,i.MairoSpriteAnimator=g},function(t,i,e){"use strict";function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}(),n=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];o(this,t),this.painters=i,e&&(this.elapsedCallback=e),this.duration=1e3,this.startTime=0,this.index=0,this.elapsedCallback=void 0}return a(t,[{key:"end",value:function(t,i){t.animating=!1,this.elapsedCallback?this.elapsedCallback(t):t.painter=i}},{key:"start",value:function(t,i){var e=+new Date+i,o=(this.painters.length,void 0),a=this,n=t.painters;this.index=0,t.animating=!0,t.painter=this.painters[this.index],o=setInterval(function(){+new Date<e?t.painter=a.painters[++a.index]:(a.end(t,n),clearInterval(o))},period)}}]),t}();i.SpriteAnimator=n},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.clipObj=void 0;var o=e(0);i.clipObj={canvas:null,radius:0,start:!1,maxRadius:0,flag:!0,init:function(t,i){this.canvas=o.element.mycanvas;var e=this.canvas.width,a=this.canvas.height;this.maxRadius=Math.sqrt(Math.pow(e,2)+Math.pow(a,2))/2,this.radius=this.maxRadius,this.context=gameControl.context,this.overCallback=t,this.resetCallback=i},setClippingRegion:function(t){this.context.beginPath(),this.context.arc(this.canvas.width/2,this.canvas.height/2,t,0,2*Math.PI,!1),this.context.clip()},fillCanvas:function(t){this.context.fillStyle=t,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},drawAnimationFrame:function(t){this.fillCanvas("black"),this.setClippingRegion(t)},startDraw:function(){this.start=!0},draw:function(){1==this.start&&(this.radius>this.maxRadius?this.endAnimation():(this.radius>0&&this.flag?(this.radius-=this.canvas.width/150,this.radius=this.radius<0?0:this.radius):(1==this.flag&&this.resetCallback(),this.flag=!1,this.radius+=this.canvas.width/150),this.drawAnimationFrame(this.radius)))},endAnimation:function(){this.start=!1,this.flag=!0,this.radius=this.canvas.width/2,this.overCallback()}}},function(t,i,e){"use strict";function o(t){var i=window.innerWidth;document.getElementsByTagName("html")[0].style.fontSize=.15625*i+"px",i>window.screen.width&&t<=10?setTimeout(function(){o(++t)},100):(c&&r(),document.getElementsByTagName("body")[0].style.opacity=1)}function a(){var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight,e=document.querySelector(".main");e.style.height=t+"px",e.style.width=i+"px",e.style.transform="rotate(90deg) translate("+(i-t)/2+"px,"+(i-t)/2+"px)",n(e)}function n(t){var i=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(i)i.call(t);else if(void 0!==window.ActiveXObject){var e=new ActiveXObject("WScript.Shell");null!==e&&e.SendKeys("{F11}")}}function s(){u.lib.removeElement(document.querySelector(".butList")),u.lib.removeElement(document.querySelector(".tip"));var t=document.createElement("DIV");t.className="result";var i=document.createElement("canvas");i.setAttribute("id","controlCanvas"),i.setAttribute("width","666"),i.setAttribute("height","364"),document.querySelector(".main").appendChild(t),document.querySelector(".main").appendChild(i),p.controler.init()}function r(){l(),s(),a(),c=!1}function l(){document.getElementsByTagName("head")[0].innerHTML='<meta charset="UTF-8">\n    <meta content="telephone=no,email=no" name="format-detection">\n    <meta name="applicable-device" content="mobile">\n    <meta name="x5-orientation" content="portrait">\n    <meta name="browsermode" content="application">\n    <meta name="full-screen" content="yes">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />\n        <link rel="icon" href="./images/ico/favicon.ico" type="image/x-icon">\n    <link rel="shortcut icon" href="./images/ico/favicon.ico" type="image/x-icon">\n    <link rel="stylesheet" href="../css/mobile.css">'}var h=e(6),u=e(1),p=e(7);(0,h.judgeMobile)()&&(window.onresize=o,setTimeout(function(){o(0)},100));var c=!0}]);